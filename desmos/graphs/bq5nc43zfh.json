{"hash": "bq5nc43zfh", "parent_hash": "9mvbjt4l7h", "thumbUrl": "https://saved-work.desmos.com/calc_thumbs/production/bq5nc43zfh.png", "stateUrl": "https://saved-work.desmos.com/calc-states/production/bq5nc43zfh", "title": "2D Metaballs - Snowflake", "access": "link", "created": "Sat, 18 Apr 2020 22:49:46 GMT", "state": {"version": 7, "graph": {"viewport": {"xmin": -2.751540069274473, "ymin": -1.9954619197651675, "xmax": 2.984855350270942, "ymax": 1.8653321119057138}, "showGrid": false, "showXAxis": false, "showYAxis": false}, "randomSeed": "910202171833582ca1910cfebc7e81e1", "expressions": {"list": [{"type": "folder", "id": "317", "title": "small useful functions", "collapsed": true}, {"type": "text", "id": "320", "folderId": "317", "text": "clamp a real number in [0,1]"}, {"type": "expression", "id": "265", "folderId": "317", "color": "#000000", "latex": "c_{p}\\left(x\\right)=\\min\\left(\\max\\left(x,0\\right),1\\right)", "hidden": true}, {"type": "text", "id": "322", "folderId": "317", "text": "distance to origin, known as \"hypot\" in some programming languages"}, {"type": "expression", "id": "266", "folderId": "317", "color": "#2d70b3", "latex": "h_{p}\\left(x,y\\right)=\\sqrt{x^{2}+y^{2}}"}, {"type": "text", "id": "324", "folderId": "317", "text": "linear interpolation (\"lerp\" or \"mix\")"}, {"type": "expression", "id": "288", "folderId": "317", "color": "#388c46", "latex": "l_{p}\\left(x,y,r_{atio}\\right)=\\left(1-r_{atio}\\right)x+r_{atio}y"}, {"type": "text", "id": "327", "folderId": "317", "text": "known as \"smoothstep\", useful in interpolation: lerp(a,b,smoothstep(x))"}, {"type": "expression", "id": "325", "folderId": "317", "color": "#000000", "latex": "s_{s}\\left(x\\right)=x^{2}\\left(3-2x\\right)", "hidden": true}, {"type": "text", "id": "334", "folderId": "317", "text": "known as \"atan2\", get polar angle from cartesian coordinate"}, {"type": "expression", "id": "331", "folderId": "317", "color": "#000000", "latex": "a_{t2}\\left(y,x\\right)=\\arctan\\left(\\frac{y}{x}\\right)+\\left\\{x>0:\\ 0,\\ \\pi\\cdot\\operatorname{sign}\\left(y\\right)\\right\\}"}, {"type": "folder", "id": "263", "title": "Metaball Primitives and Operations", "hidden": true, "collapsed": true}, {"type": "expression", "id": "1", "folderId": "263", "color": "#c74440", "latex": "d_{circ}\\left(x,y,r_{0}\\right)=\\sqrt{x^{2}+y^{2}}-r_{0}"}, {"type": "expression", "id": "264", "folderId": "263", "color": "#000000", "latex": "d_{line}\\left(x,y,x_{1},y_{1},x_{2},y_{2}\\right)=h_{p}\\left(\\left(x-x_{1}\\right)-c_{p}\\left(\\frac{\\left(x-x_{1}\\right)\\left(x_{2}-x_{1}\\right)+\\left(y-y_{1}\\right)\\left(y_{2}-y_{1}\\right)}{\\left(x_{2}-x_{1}\\right)^{2}+\\left(y_{2}-y_{1}\\right)^{2}}\\right)\\left(x_{2}-x_{1}\\right),\\left(y-y_{1}\\right)-c_{p}\\left(\\frac{\\left(x-x_{1}\\right)\\left(x_{2}-x_{1}\\right)+\\left(y-y_{1}\\right)\\left(y_{2}-y_{1}\\right)}{\\left(x_{2}-x_{1}\\right)^{2}+\\left(y_{2}-y_{1}\\right)^{2}}\\right)\\left(y_{2}-y_{1}\\right)\\right)"}, {"type": "expression", "id": "276", "folderId": "263", "color": "#c74440", "latex": "d_{box}\\left(x,y,x_{r},y_{r}\\right)=h_{p}\\left(\\max\\left(\\left|x\\right|-x_{r},0\\right),\\max\\left(\\left|y\\right|-y_{r},0\\right)\\right)+\\min\\left(\\max\\left(\\left|x\\right|-x_{r},\\left|y\\right|-y_{r}\\right),0\\right)"}, {"type": "expression", "id": "278", "folderId": "263", "color": "#388c46", "latex": "d_{boxb}\\left(x,y,x_{r},y_{r}\\right)=\\max\\left(\\left|x\\right|-x_{r},\\left|y\\right|-y_{r}\\right)"}, {"type": "expression", "id": "298", "folderId": "263", "color": "#6042a6", "latex": "d_{trigu}\\left(x,y,x_{1},y_{1},x_{2},y_{2},x_{3},y_{3}\\right)=\\min\\left(d_{line}\\left(x,y,x_{1},y_{1},x_{2},y_{2}\\right),d_{line}\\left(x,y,x_{2},y_{2},x_{3},y_{3}\\right),d_{line}\\left(x,y,x_{3},y_{3},x_{1},y_{1}\\right)\\right)"}, {"type": "expression", "id": "304", "folderId": "263", "color": "#6042a6", "latex": "d_{trig}\\left(x,y,x_{1},y_{1},x_{2},y_{2},x_{3},y_{3}\\right)=d_{trigu}\\left(x,y,x_{1},y_{1},x_{2},y_{2},x_{3},y_{3}\\right)\\cdot\\operatorname{sign}\\left(2.5-\\operatorname{abs}\\left(\\operatorname{sign}\\left(\\left(x_{1}-x\\right)\\left(y_{2}-y\\right)-\\left(x_{2}-x\\right)\\left(y_{1}-y\\right)\\right)+\\operatorname{sign}\\left(\\left(x_{2}-x\\right)\\left(y_{3}-y\\right)-\\left(x_{3}-x\\right)\\left(y_{2}-y\\right)\\right)+\\operatorname{sign}\\left(\\left(x_{3}-x\\right)\\left(y_{1}-y\\right)-\\left(x_{1}-x\\right)\\left(y_{3}-y\\right)\\right)\\right)\\right)"}, {"type": "text", "id": "292", "folderId": "263", "text": "Union: min(a,b); Intersect: max(a,b); Subtraction: max(a,-b)"}, {"type": "expression", "id": "281", "folderId": "263", "color": "#c74440", "latex": "s_{min}\\left(x,y,r_{adius}\\right)=\\left\\{\\left|x-y\\right|>r_{adius}:\\ \\min\\left(x,y\\right),\\ \\frac{1}{2}\\left(-\\frac{\\left(x-y\\right)^{2}}{2r_{adius}}+x+y-\\frac{1}{2}r_{adius}\\right)\\right\\}"}, {"type": "expression", "id": "293", "folderId": "263", "color": "#c74440", "latex": "s_{max}\\left(x,y,r_{adius}\\right)=\\left\\{\\left|x-y\\right|>r_{adius}:\\ \\max\\left(x,y\\right),\\ \\frac{1}{2}\\left(\\frac{\\left(x-y\\right)^{2}}{2r_{adius}}+x+y+\\frac{1}{2}r_{adius}\\right)\\right\\}"}, {"type": "expression", "id": "294", "folderId": "263", "color": "#2d70b3", "latex": "s_{sub}\\left(x,y,r_{adius}\\right)=\\left\\{\\left|x+y\\right|>r_{adius}:\\ \\max\\left(x,-y\\right),\\ \\frac{1}{2}\\left(\\frac{\\left(x+y\\right)^{2}}{2r_{adius}}+x-y+\\frac{1}{2}r_{adius}\\right)\\right\\}"}, {"type": "expression", "id": "350", "color": "#000000", "latex": "\\max\\left(\\left|x\\right|-3,\\left|y\\right|-2\\right)=0", "hidden": true}, {"type": "folder", "id": "297", "title": "some tests", "hidden": true, "collapsed": true}, {"type": "expression", "id": "269", "folderId": "297", "color": "#c74440", "latex": "A=\\left(-3.88,-1.24\\right)"}, {"type": "expression", "id": "270", "folderId": "297", "color": "#388c46", "latex": "B=\\left(1.69,3.78\\right)"}, {"type": "expression", "id": "279", "folderId": "297", "color": "#2d70b3", "latex": "C=\\left(-2.14,1.66\\right)"}, {"type": "expression", "id": "271", "folderId": "297", "color": "#2d70b3", "latex": "r=1.39", "hidden": true, "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "5", "step": "0.01"}}, {"type": "expression", "id": "312", "folderId": "297", "color": "#c74440", "latex": "k=0.64", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "2", "step": "0.01"}}, {"type": "text", "id": "310", "folderId": "297", "text": "Certain graphs are very slow. One guess it is because of the way Desmos evaluating functions. (ex. inline expansion)"}, {"type": "expression", "id": "274", "folderId": "297", "color": "#000000", "latex": "\\min\\left(d_{circ}\\left(x-A.x,y-A.y,r\\right),d_{circ}\\left(x-B.x,y-B.y,r\\right),d_{circ}\\left(x-C.x,y-C.y,r\\right)\\right)=0", "hidden": true}, {"type": "expression", "id": "275", "folderId": "297", "color": "#6042a6", "latex": "d_{line}\\left(x,y,A.x,A.y,B.x,B.y\\right)-r=0", "hidden": true}, {"type": "expression", "id": "277", "folderId": "297", "color": "#2d70b3", "latex": "d_{box}\\left(x-\\frac{1}{2}\\left(A.x+B.x\\right),y-\\frac{1}{2}\\left(A.y+B.y\\right),\\frac{1}{2}\\left|B.x-A.x\\right|,\\frac{1}{2}\\left|B.y-A.y\\right|\\right)-r=0", "hidden": true}, {"type": "expression", "id": "289", "folderId": "297", "color": "#6042a6", "latex": "d_{trig}\\left(x,y,A.x,A.y,B.x,B.y,C.x,C.y\\right)-r=0", "hidden": true}, {"type": "expression", "id": "282", "folderId": "297", "color": "#2d70b3", "latex": "s_{min}\\left(d_{line}\\left(x,y,A.x,A.y,B.x,B.y\\right)-r,d_{circ}\\left(x-C.x,y-C.y,r\\right),k\\right)=0"}, {"type": "expression", "id": "285", "folderId": "297", "color": "#c74440", "latex": "s_{max}\\left(d_{line}\\left(x,y,A.x,A.y,B.x,B.y\\right)-r,d_{circ}\\left(x-C.x,y-C.y,r\\right),k\\right)=0"}, {"type": "expression", "id": "286", "folderId": "297", "color": "#388c46", "latex": "s_{sub}\\left(d_{line}\\left(x,y,A.x,A.y,B.x,B.y\\right)-r,d_{circ}\\left(x-C.x,y-C.y,r\\right),k\\right)=0"}, {"type": "expression", "id": "302", "folderId": "297", "color": "#2d70b3", "latex": "s_{min}\\left(\\left(d_{circ}\\left(x-C.x,y-C.y,r\\right)\\right),y-\\sin\\left(x\\right),k\\right)=0", "hidden": true}, {"type": "expression", "id": "313", "folderId": "297", "color": "#2d70b3", "latex": "l_{p}\\left(d_{circ}\\left(x,y,r\\right),d_{boxb}\\left(x-C.x,y-C.y,r,r\\right),\\operatorname{erf}\\left(k\\right)\\right)=0", "hidden": true}, {"type": "expression", "id": "305", "folderId": "297", "color": "#388c46", "latex": "d_{trig}\\left(x,y,A.x,A.y,B.x,B.y,C.x,C.y\\right)+\\frac{1}{\\sqrt{2}}\\left(\\sin\\left(2\\pi kx\\right)+\\sin\\left(2\\pi ky\\right)\\right)-r=0", "hidden": true}, {"type": "expression", "id": "306", "folderId": "297", "color": "#2d70b3", "latex": "d_{trig}\\left(x,y,A.x,A.y,B.x,B.y,C.x,C.y\\right)+\\sin\\left(2\\pi kx\\right)\\sin\\left(2\\pi ky\\right)-r=0", "hidden": true}, {"type": "expression", "id": "307", "folderId": "297", "color": "#c74440", "latex": "d_{trig}\\left(x+\\sin\\left(2\\pi kx\\right),y+\\sin\\left(2\\pi ky\\right),A.x,A.y,B.x,B.y,C.x,C.y\\right)-r=0", "hidden": true}, {"type": "expression", "id": "308", "folderId": "297", "color": "#6042a6", "latex": "d_{trig}\\left(x+\\sin\\left(2\\pi ky\\right),y+\\sin\\left(2\\pi kx\\right),A.x,A.y,B.x,B.y,C.x,C.y\\right)-r=0", "hidden": true}, {"type": "folder", "id": "349", "title": "Example: Snowflake"}, {"type": "expression", "id": "346", "folderId": "349", "color": "#6042a6", "latex": "j_{0}=0.16", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "0.4", "step": "0.01"}}, {"type": "expression", "id": "315", "folderId": "349", "color": "#6042a6", "latex": "j_{1}=0.45", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "1", "step": "0.01"}}, {"type": "expression", "id": "329", "folderId": "349", "color": "#388c46", "latex": "j_{2}=0.8", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "1", "step": "0.01"}}, {"type": "expression", "id": "341", "folderId": "349", "color": "#6042a6", "latex": "a=0.9", "slider": {"hardMin": true, "hardMax": true, "playDirection": -1, "min": "0", "max": "\\frac{\\pi}{2}", "step": "0.01"}}, {"type": "expression", "id": "347", "folderId": "349", "color": "#000000", "latex": "l=1.22", "slider": {"hardMin": true, "hardMax": true, "min": "0.5", "max": "1.5", "step": "0.01"}}, {"type": "expression", "id": "342", "folderId": "349", "color": "#000000", "latex": "l_{1}=0.42", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "1", "step": "0.01"}}, {"type": "expression", "id": "343", "folderId": "349", "color": "#c74440", "latex": "l_{2}=0.35", "slider": {"hardMin": true, "hardMax": true, "min": "0", "max": "1", "step": "0.01"}}, {"type": "expression", "id": "316", "folderId": "349", "color": "#000000", "latex": "u\\left(x,y\\right)=\\min\\left(x-j_{0},\\ d_{line}\\left(x,y,0,0,l,0\\right),d_{line}\\left(x,\\left|y\\right|,j_{1},0,j_{1}+l_{1}\\cos\\left(a\\right),l_{1}\\sin\\left(a\\right)\\right),d_{line}\\left(x,\\left|y\\right|,j_{2},0,j_{2}+l_{2}\\cos\\left(a\\right),l_{2}\\sin\\left(a\\right)\\right)\\right)-0.05"}, {"type": "expression", "id": "336", "folderId": "349", "color": "#2d70b3", "latex": "u\\left(h_{p}\\left(x,y\\right)\\cos\\left(\\left|\\operatorname{mod}\\left(a_{t2}\\left(y,x\\right),\\frac{\\pi}{3}\\right)\\right|-\\frac{\\pi}{6}\\right),h_{p}\\left(x,y\\right)\\sin\\left(\\left|\\operatorname{mod}\\left(a_{t2}\\left(y,x\\right),\\frac{\\pi}{3}\\right)\\right|-\\frac{\\pi}{6}\\right)\\right)=0", "hidden": true}, {"type": "expression", "id": "357", "color": "#388c46", "latex": "\\operatorname{abs}\\left(u\\left(h_{p}\\left(x,y\\right)\\cos\\left(\\left|\\operatorname{mod}\\left(a_{t2}\\left(y,x\\right),\\frac{\\pi}{3}\\right)\\right|-\\frac{\\pi}{6}\\right),h_{p}\\left(x,y\\right)\\sin\\left(\\left|\\operatorname{mod}\\left(a_{t2}\\left(y,x\\right),\\frac{\\pi}{3}\\right)\\right|-\\frac{\\pi}{6}\\right)\\right)\\right)-0.01=0"}]}}}