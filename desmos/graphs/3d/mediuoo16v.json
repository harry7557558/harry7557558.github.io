{"hash":"mediuoo16v","parent_hash":"geip9hoxen","thumbUrl":"https://www.desmos.com/calc-3d-thumbs/production/mediuoo16v.png","stateUrl":"https://www.desmos.com/calc-3d-states/production/mediuoo16v","title":"Ray-Splat Integral","created":"2024-09-15T23:00:14.027Z","product":"graphing-3d","state":{"version":11,"randomSeed":"13f6562c065f676b2076876780a785ef","graph":{"viewport":{"xmin":-2,"ymin":-2,"zmin":-1,"xmax":2,"ymax":2,"zmax":3},"userLockedViewport":true,"threeDMode":true,"worldRotation3D":[-0.6354022913488346,-0.6249052669695273,-0.4536048230158401,0.5086024589557374,-0.7807005874946944,0.3630841933084296,-0.5810227765704853,6.798076328950222e-13,0.8138872975462927],"axis3D":[0,0,1.000000000004866],"product":"graphing-3d"},"expressions":{"list":[{"type":"text","id":"248","text":"3D Gaussian splatting is old, what about 3D polynomial patch splatting? What about doing a volumetric integration along the ray instead of projection+rasterization for better multiview consistency?"},{"type":"text","id":"246","text":"Try the following slider:\n\n0: Gaussian, exp(-r^2)\n1: C0 polynomial, max(1-r^2, 0)\n2: C1 polynomial, max(1-r^2, 0)^2\n3: C2 polynomial, max(1-r^2, 0)^3\n4: 1/(r^2+1)^2\n5: sech(r)^2 (N/A)"},{"type":"expression","id":"253","color":"#c74440","latex":"G=2","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"3","step":"1"}},{"type":"expression","id":"360","color":"#388c46"},{"type":"folder","id":"29","title":"Splat Parameters"},{"type":"text","id":"159","folderId":"29","text":"scale; unit: L"},{"type":"expression","id":"1","folderId":"29","color":"#c74440","latex":"s_{x}=1.01","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"2"}},{"type":"expression","id":"2","folderId":"29","color":"#2d70b3","latex":"s_{y}=0.07","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"2"}},{"type":"expression","id":"3","folderId":"29","color":"#388c46","latex":"s_{z}=1.78","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"2"}},{"type":"text","id":"161","folderId":"29","text":"mean; unit: L"},{"type":"expression","id":"21","folderId":"29","color":"#c74440","latex":"m_{x}=-0.345","slider":{"hardMin":true,"hardMax":true,"min":"-2","max":"2"}},{"type":"expression","id":"22","folderId":"29","color":"#2d70b3","latex":"m_{y}=-0.62","slider":{"hardMin":true,"hardMax":true,"min":"-2","max":"2"}},{"type":"expression","id":"23","folderId":"29","color":"#388c46","latex":"m_{z}=1.97","slider":{"hardMin":true,"hardMax":true,"min":"-2","max":"2"}},{"type":"text","id":"163","folderId":"29","text":"rotation, dimensionless"},{"type":"expression","id":"5","folderId":"29","color":"#aaaaaa","latex":"r_{x}=-0.32","slider":{"hardMin":true,"hardMax":true,"min":"-\\pi","max":"\\pi"}},{"type":"expression","id":"6","folderId":"29","color":"#c74440","latex":"r_{z}=-2.85","slider":{"hardMin":true,"hardMax":true,"min":"-2\\pi","max":"2\\pi"}},{"type":"expression","id":"7","folderId":"29","color":"#2d70b3","latex":"r_{y}=2.97","slider":{"hardMin":true,"hardMax":true,"min":"-\\pi","max":"\\pi"}},{"type":"text","id":"165","folderId":"29","text":"opacity: dimensionless, any positive scalar\ncolor: any value"},{"type":"expression","id":"107","folderId":"29","color":"#aaaaaa","latex":"o_{pac}=2.67","slider":{"hardMin":true,"min":"0"}},{"type":"expression","id":"115","folderId":"29","color":"#2d70b3","latex":"c_{olor}=0.521","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1"}},{"type":"text","id":"192","folderId":"29","text":"presets (1 good + 3 extreme)"},{"type":"expression","id":"190","folderId":"29","color":"#c74440","latex":"s_{x}\\to0.95,\\ s_{y}\\to0.61,\\ s_{z}\\to0.91,\\ m_{x}\\to-0.345,\\ m_{y}\\to-0.62,\\ m_{z}\\to1.97,\\ r_{x}\\to-0.32,\\ r_{z}\\to-2.85,\\ r_{y}\\to2.97,\\ o_{pac}\\to0.8,\\ c_{olor}\\to0.521"},{"type":"expression","id":"193","folderId":"29","color":"#388c46","latex":"s_{x}\\to1.01,\\ s_{y}\\to0.07,\\ s_{z}\\to1.78,\\ m_{x}\\to-0.345,\\ m_{y}\\to-0.62,\\ m_{z}\\to1.97,\\ r_{x}\\to-0.32,\\ r_{z}\\to-2.85,\\ r_{y}\\to2.97,\\ o_{pac}\\to2.67,\\ c_{olor}\\to0.521"},{"type":"expression","id":"194","folderId":"29","color":"#6042a6","latex":"s_{x}\\to1.01,\\ s_{y}\\to0.07,\\ s_{z}\\to1.80,\\ m_{x}\\to-0.345,\\ m_{y}\\to-0.62,\\ m_{z}\\to1.84,\\ r_{x}\\to1.39,\\ r_{z}\\to-2.85,\\ r_{y}\\to2.97,\\ o_{pac}\\to2.67,\\ c_{olor}\\to0.521"},{"type":"expression","id":"195","folderId":"29","color":"#aaaaaa","latex":"s_{x}\\to1.65,\\ s_{y}\\to0.04,\\ s_{z}\\to0.21,\\ m_{x}\\to-0.345,\\ m_{y}\\to-0.62,\\ m_{z}\\to1.84,\\ r_{x}\\to0.91,\\ r_{z}\\to-2.85,\\ r_{y}\\to2.97,\\ o_{pac}\\to2.67,\\ c_{olor}\\to0.521"},{"type":"text","id":"312","folderId":"29","text":"Radius for projection, 1 for polynomial and larger for Gaussian"},{"type":"expression","id":"313","folderId":"29","color":"#6042a6","latex":"r_{proj}=1","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"3","step":"0.5"}},{"type":"expression","id":"24","color":"#6042a6"},{"type":"folder","id":"31","title":"Transformation","hidden":true},{"type":"text","id":"27","folderId":"31","text":"columns of rotation matrix"},{"type":"expression","id":"8","folderId":"31","color":"#c74440","latex":"R_{0}=\\left(-\\cos\\left(r_{y}\\right)\\sin\\left(r_{z}\\right)+\\sin\\left(r_{y}\\right)\\sin\\left(r_{x}\\right)\\cos\\left(r_{z}\\right),\\cos\\left(r_{y}\\right)\\cos\\left(r_{z}\\right)+\\sin\\left(r_{y}\\right)\\sin\\left(r_{x}\\right)\\sin\\left(r_{z}\\right),-\\cos\\left(r_{x}\\right)\\sin\\left(r_{y}\\right)\\right)"},{"type":"expression","id":"9","folderId":"31","color":"#388c46","latex":"R_{1}=\\left(-\\sin\\left(r_{y}\\right)\\sin\\left(r_{z}\\right)-\\sin\\left(r_{x}\\right)\\cos\\left(r_{y}\\right)\\cos\\left(r_{z}\\right),\\sin\\left(r_{y}\\right)\\cos\\left(r_{z}\\right)-\\sin\\left(r_{x}\\right)\\cos\\left(r_{y}\\right)\\sin\\left(r_{z}\\right),\\cos\\left(r_{x}\\right)\\cos\\left(r_{y}\\right)\\right)"},{"type":"expression","id":"10","folderId":"31","color":"#2d70b3","latex":"R_{2}=\\left(\\cos\\left(r_{x}\\right)\\cos\\left(r_{z}\\right),\\cos\\left(r_{x}\\right)\\sin\\left(r_{z}\\right),\\sin\\left(r_{x}\\right)\\right)"},{"type":"text","id":"37","folderId":"31","text":"R: 3x3 orthogonal matrix transform, dimensionless"},{"type":"expression","id":"16","folderId":"31","color":"#c74440","latex":"R\\left(p\\right)=\\left(\\left(R_{0}.x,R_{1}.x,R_{2}.x\\right)\\cdot p,\\ \\left(R_{0}.y,R_{1}.y,R_{2}.y\\right)\\cdot p,\\ \\left(R_{0}.z,R_{1}.z,R_{2}.z\\right)\\cdot p\\right)"},{"type":"expression","id":"12","folderId":"31","color":"#2d70b3","latex":"R_{inv}\\left(p\\right)=\\left(R_{0}\\cdot p,\\ R_{1}\\cdot p,\\ R_{2}\\cdot p\\right)"},{"type":"text","id":"39","folderId":"31","text":"Q: 3x3 matrix transform; unit: L\nPull out rows since we need it later"},{"type":"expression","id":"18","folderId":"31","color":"#388c46","latex":"Q\\left(p\\right)=\\left(\\left(R_{0}.x,R_{1}.x,R_{2}.x\\right)\\cdot\\left(s_{x}p.x,\\ s_{y}p.y,\\ s_{z}p.z\\right),\\ \\left(R_{0}.y,R_{1}.y,R_{2}.y\\right)\\cdot\\left(s_{x}p.x,\\ s_{y}p.y,\\ s_{z}p.z\\right),\\ \\left(R_{0}.z,R_{1}.z,R_{2}.z\\right)\\cdot\\left(s_{x}p.x,\\ s_{y}p.y,\\ s_{z}p.z\\right)\\right)"},{"type":"expression","id":"333","folderId":"31","color":"#2d70b3","latex":"Q_{inv0}=\\frac{1}{s_{x}}R_{0}"},{"type":"expression","id":"334","folderId":"31","color":"#388c46","latex":"Q_{inv1}=\\frac{1}{s_{y}}R_{1}"},{"type":"expression","id":"335","folderId":"31","color":"#6042a6","latex":"Q_{inv2}=\\frac{1}{s_{z}}R_{2}"},{"type":"expression","id":"17","folderId":"31","color":"#2d70b3","latex":"Q_{inv}\\left(p\\right)=\\left(Q_{inv0}\\cdot p,\\ Q_{inv1}\\cdot p,\\ Q_{inv2}\\cdot p\\right)"},{"type":"expression","id":"336","folderId":"31","color":"#aaaaaa","latex":"Q_{invT0}=\\left(\\frac{R_{0}.x}{s_{x}},\\frac{R_{1}.x}{s_{y}},\\frac{R_{2}.x}{s_{z}}\\right)"},{"type":"expression","id":"337","folderId":"31","color":"#c74440","latex":"Q_{invT1}=\\left(\\frac{R_{0}.y}{s_{x}},\\frac{R_{1}.y}{s_{y}},\\frac{R_{2}.y}{s_{z}}\\right)"},{"type":"expression","id":"338","folderId":"31","color":"#2d70b3","latex":"Q_{invT2}=\\left(\\frac{R_{0}.z}{s_{x}},\\frac{R_{1}.z}{s_{y}},\\frac{R_{2}.z}{s_{z}}\\right)"},{"type":"expression","id":"329","folderId":"31","color":"#388c46","latex":"Q_{invT}\\left(p\\right)=\\left(Q_{invT0}\\cdot p,\\ Q_{invT1}\\cdot p,\\ Q_{invT2}\\cdot p\\right)"},{"type":"text","id":"41","folderId":"31","text":"T: 3x4 affine transform; unit: L"},{"type":"expression","id":"32","folderId":"31","color":"#6042a6","latex":"T\\left(p\\right)=Q\\left(p\\right)+m"},{"type":"expression","id":"33","folderId":"31","color":"#aaaaaa","latex":"T_{inv}\\left(p\\right)=Q_{inv}\\left(p-m\\right)"},{"type":"expression","id":"35","color":"#2d70b3"},{"type":"folder","id":"50","title":"Splat Primitive"},{"type":"expression","id":"25","folderId":"50","color":"#6042a6","latex":"m=\\left(m_{x},m_{y},m_{z}\\right)"},{"type":"expression","id":"19","folderId":"50","color":"#6042a6","latex":"E_{0}\\left(u,v\\right)=\\left(\\cos\\left(2\\pi u\\right)\\sin\\left(\\pi v\\right),\\sin\\left(2\\pi u\\right)\\sin\\left(\\pi v\\right),\\cos\\left(\\pi v\\right)\\right)"},{"type":"expression","id":"15","folderId":"50","color":"#aaaaaa","latex":"T\\left(E_{0}\\left(u,v\\right)\\right)\\left\\{z<m_{z}\\right\\}"},{"type":"expression","id":"34","folderId":"50","color":"#c74440","latex":"\\left|T_{inv}\\left(\\left(x,y,z\\right)\\right)\\right|=1","hidden":true},{"type":"text","id":"65","folderId":"50","text":"splat density"},{"type":"expression","id":"109","folderId":"50","color":"#2d70b3","latex":"\\int_{-\\infty}^{\\infty}e^{-r^{2}}dr"},{"type":"expression","id":"204","folderId":"50","color":"#c74440","latex":"\\int_{-1}^{1}\\max\\left(1-r^{2},0\\right)dr"},{"type":"expression","id":"264","folderId":"50","color":"#6042a6","latex":"\\int_{-1}^{1}\\max\\left(1-r^{2},0\\right)^{2}dr"},{"type":"expression","id":"361","folderId":"50","color":"#c74440","latex":"\\int_{-1}^{1}\\max\\left(1-r^{2},0\\right)^{3}dr"},{"type":"expression","id":"386","folderId":"50","color":"#388c46","latex":"\\int_{-\\infty}^{\\infty}\\frac{1}{\\left(r^{2}+1\\right)^{2}}dr"},{"type":"expression","id":"374","folderId":"50","color":"#2d70b3","latex":"\\int_{-\\infty}^{\\infty}\\operatorname{sech}^{2}\\left(r\\right)dr"},{"type":"expression","id":"265","folderId":"50","color":"#aaaaaa","latex":"V=\\left\\{G=0:\\sqrt{\\pi},\\ G=1:\\frac{4}{3},\\ G=2:\\frac{16}{15},\\ G=3:\\frac{32}{35},\\ G=4:\\frac{\\pi}{2},\\ G=5:2\\right\\}"},{"type":"text","id":"178","folderId":"50","text":"density with multiplier; unit: L^-1"},{"type":"expression","id":"110","folderId":"50","color":"#388c46","latex":"w_{d}=o_{pac}\\left(V\\cdot\\left(s_{x}s_{y}s_{z}\\right)^{\\frac{1}{3}}\\right)^{-1}"},{"type":"expression","id":"254","folderId":"50","color":"#2d70b3","latex":"D_{r}\\left(r_{2}\\right)=\\left\\{G=0:\\ e^{-r_{2}},\\ 1\\le G\\le3:\\max\\left(1-r_{2},0\\right)^{G},\\ G=4:\\frac{1}{\\left(r_{2}+1\\right)^{2}},\\ G=5:\\operatorname{sech}^{2}\\left(\\sqrt{r_{2}}\\right)\\right\\}"},{"type":"expression","id":"66","folderId":"50","color":"#2d70b3","latex":"D\\left(p\\right)=w_{d}D_{r}\\left(\\left|T_{inv}\\left(p\\right)\\right|^{2}\\right)"},{"type":"expression","id":"67","folderId":"50","color":"#aaaaaa","latex":"D\\left(\\left(x,y,z\\right)\\right)=\\left[0.05,0.25...0.95\\right]w_{d}\\left\\{z<m_{z}\\right\\}"},{"type":"expression","id":"13","color":"#388c46"},{"type":"folder","id":"44","title":"Ray and refactored parameters"},{"type":"text","id":"169","folderId":"44","text":"ray origin and direction vector; unit: L and dimensionless"},{"type":"expression","id":"45","folderId":"44","color":"#fa7e19","latex":"r_{o0}=\\left(1.2,0.4,0.4\\right)","hidden":true},{"type":"expression","id":"46","folderId":"44","color":"#6042a6","latex":"r_{d0}=\\left(-1,-1,2\\right)","hidden":true},{"type":"expression","id":"239","folderId":"44","color":"#fa7e19","latex":"r_{o}=r_{o0}+r_{d0}\\cdot0.4"},{"type":"expression","id":"83","folderId":"44","color":"#2d70b3","latex":"r_{d}=r_{d0}\\cdot\\frac{2\\left|d_{mo}\\right|}{\\left|r_{d0}\\right|}","hidden":true},{"type":"expression","id":"53","folderId":"44","color":"#aaaaaa","latex":"d_{mo}=r_{o}-m","hidden":true},{"type":"expression","id":"47","folderId":"44","color":"#fa7e19","latex":"r_{o}+r_{d}\\cdot t","parametricDomain":{"min":"","max":"10"},"domain":{"min":"0","max":"10"}},{"type":"text","id":"173","folderId":"44","text":"quadratic coefficients, at^2+2bt+c=r^2; units: L^-2, L^-1, L"},{"type":"expression","id":"56","folderId":"44","color":"#388c46","latex":"a=Q_{inv}\\left(r_{d}\\right)\\cdot Q_{inv}\\left(r_{d}\\right)"},{"type":"expression","id":"57","folderId":"44","color":"#6042a6","latex":"b=Q_{inv}\\left(r_{d}\\right)\\cdot Q_{inv}\\left(d_{mo}\\right)"},{"type":"expression","id":"58","folderId":"44","color":"#aaaaaa","latex":"c=Q_{inv}\\left(d_{mo}\\right)\\cdot Q_{inv}\\left(d_{mo}\\right)-\\left\\{1\\le G\\le3:1,0\\right\\}"},{"type":"text","id":"268","folderId":"44","text":"distance at intersections; units: L"},{"type":"expression","id":"269","folderId":"44","color":"#388c46","latex":"t_{0}=\\frac{-b-\\sqrt{b^{2}-ac}}{a}"},{"type":"expression","id":"270","folderId":"44","color":"#6042a6","latex":"t_{1}=\\frac{-b+\\sqrt{b^{2}-ac}}{a}"},{"type":"expression","id":"271","folderId":"44","color":"#c74440","latex":"r_{o}+r_{d}\\cdot\\left[t_{0},t_{1}\\right]\\left\\{1\\le G\\le3\\right\\}"},{"type":"expression","id":"255","color":"#388c46"},{"type":"text","id":"304","text":"Integral of density along the ray"},{"type":"folder","id":"256","title":"exp(-r^2)","collapsed":true},{"type":"text","id":"176","folderId":"256","text":"mean, variance, and weight of ray density; units: L, L^2, L^-1"},{"type":"expression","id":"210","folderId":"256","color":"#2d70b3","latex":"\\frac{\\int_{-\\infty}^{\\infty}t\\cdot D\\left(r_{o}+r_{d}\\cdot t\\right)dt}{\\int_{-\\infty}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)dt}"},{"type":"expression","id":"208","folderId":"256","color":"#aaaaaa","latex":"t_{u}=-\\frac{b}{a}"},{"type":"expression","id":"211","folderId":"256","color":"#388c46","latex":"\\frac{\\int_{-\\infty}^{\\infty}\\left(t-t_{u}\\right)^{2}\\cdot D\\left(r_{o}+r_{d}\\cdot t\\right)dt}{\\int_{-\\infty}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)dt}"},{"type":"expression","id":"216","folderId":"256","color":"#388c46","latex":"t_{s}=\\frac{1}{2a}"},{"type":"expression","id":"220","folderId":"256","color":"#2d70b3","latex":"D\\left(r_{o}+r_{d}\\cdot t_{u}\\right)"},{"type":"expression","id":"224","folderId":"256","color":"#c74440","latex":"t_{w}=w_{d}\\exp\\left(\\frac{b^{2}-ac}{a}\\right)"},{"type":"expression","id":"62","folderId":"256","color":"#c74440","latex":"r_{o}+r_{d}\\cdot\\operatorname{normaldist}\\left(t_{u},\\sqrt{t_{s}}\\right).\\operatorname{inversecdf}\\left(\\left[0.05,0.15...0.95\\right]\\right)\\left\\{G=0\\right\\}","pointSize":"2","movablePointSize":"2"},{"type":"text","id":"284","folderId":"256","text":"Integrate ray density over the entire domain"},{"type":"expression","id":"225","folderId":"256","color":"#2d70b3","latex":"\\int_{-\\infty}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"226","folderId":"256","color":"#388c46","latex":"\\left|r_{d}\\right|t_{w}\\int_{-\\infty}^{\\infty}\\exp\\left(-a\\left(t-t_{u}\\right)^{2}\\right)dt"},{"type":"expression","id":"229","folderId":"256","color":"#c74440","latex":"w_{d}\\left|r_{d}\\right|\\exp\\left(\\frac{b^{2}}{a}-c\\right)\\sqrt{\\frac{\\pi}{a}}"},{"type":"expression","id":"106","folderId":"256","color":"#6042a6","latex":"1-\\exp\\left(-w_{d}\\left|r_{d}\\right|\\exp\\left(\\frac{b^{2}}{a}-c\\right)\\sqrt{\\frac{\\pi}{a}}\\right)"},{"type":"text","id":"237","folderId":"256","text":"Integrate ray density over positive t range"},{"type":"expression","id":"238","folderId":"256","color":"#2d70b3","latex":"\\int_{0}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"240","folderId":"256","color":"#6042a6","latex":"\\left|r_{d}\\right|t_{w}\\int_{0}^{\\infty}\\exp\\left(-a\\left(t-t_{u}\\right)^{2}\\right)dt"},{"type":"expression","id":"241","folderId":"256","color":"#aaaaaa","latex":"\\left|r_{d}\\right|t_{w}\\sqrt{\\frac{\\pi}{a}}\\frac{\\operatorname{erf}\\left(\\sqrt{a}t_{u}\\right)+1}{2}"},{"type":"expression","id":"242","folderId":"256","color":"#c74440","latex":"\\frac{1}{2}w_{d}\\left|r_{d}\\right|\\exp\\left(\\frac{b^{2}}{a}-c\\right)\\sqrt{\\frac{\\pi}{a}}\\left(\\operatorname{erf}\\left(\\frac{-b}{\\sqrt{a}}\\right)+1\\right)"},{"type":"expression","id":"244","folderId":"256","color":"#388c46","latex":"1-\\exp\\left(-\\frac{1}{2}w_{d}\\left|r_{d}\\right|\\exp\\left(\\frac{b^{2}}{a}-c\\right)\\sqrt{\\frac{\\pi}{a}}\\left(\\operatorname{erf}\\left(\\frac{-b}{\\sqrt{a}}\\right)+1\\right)\\right)"},{"type":"folder","id":"262","title":"1-r^2","collapsed":true},{"type":"expression","id":"263","folderId":"262","color":"#388c46","latex":"\\int_{t_{0}}^{t_{1}}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"290","folderId":"262","color":"#c74440","latex":"\\left|r_{d}\\right|\\int_{t_{0}}^{t_{1}}w_{d}\\frac{b^{2}-ac}{a}\\left(1-\\frac{\\left(t+\\frac{b}{a}\\right)^{2}}{\\left(\\frac{\\sqrt{b^{2}-ac}}{a}\\right)^{2}}\\right)dt"},{"type":"expression","id":"273","folderId":"262","color":"#2d70b3","latex":"\\left|r_{d}\\right|\\int_{t_{0}}^{t_{1}}w_{d}\\frac{1}{a}\\left(\\left(b^{2}-ac\\right)-\\left(at+b\\right)^{2}\\right)dt"},{"type":"expression","id":"274","folderId":"262","color":"#388c46","latex":"w_{d}\\left|r_{d}\\right|\\frac{1}{a}\\int_{\\frac{-b-\\sqrt{b^{2}-ac}}{a}}^{\\frac{-b+\\sqrt{b^{2}-ac}}{a}}\\left(\\left(b^{2}-ac\\right)-\\left(at+b\\right)^{2}\\right)dt"},{"type":"expression","id":"275","folderId":"262","color":"#6042a6","latex":"w_{d}\\left|r_{d}\\right|\\frac{1}{a}\\int_{\\frac{-\\sqrt{b^{2}-ac}}{a}}^{\\frac{\\sqrt{b^{2}-ac}}{a}}\\left(\\left(b^{2}-ac\\right)-\\left(at\\right)^{2}\\right)dt"},{"type":"expression","id":"276","folderId":"262","color":"#aaaaaa","latex":"w_{d}\\left|r_{d}\\right|\\frac{1}{a^{2}}\\int_{-\\sqrt{b^{2}-ac}}^{\\sqrt{b^{2}-ac}}\\left(\\left(b^{2}-ac\\right)-x^{2}\\right)dx"},{"type":"expression","id":"277","folderId":"262","color":"#c74440","latex":"w_{d}\\left|r_{d}\\right|\\frac{4}{3a^{2}}\\left(b^{2}-ac\\right)^{\\frac{3}{2}}"},{"type":"expression","id":"278","folderId":"262","color":"#2d70b3","latex":"1-\\exp\\left(-w_{d}\\left|r_{d}\\right|\\frac{4}{3a^{2}}\\left(b^{2}-ac\\right)^{\\frac{3}{2}}\\right)"},{"type":"folder","id":"286","title":"(1-r^2)^2","collapsed":true},{"type":"expression","id":"287","folderId":"286","color":"#388c46","latex":"\\int_{t_{0}}^{t_{1}}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"288","folderId":"286","color":"#6042a6","latex":"\\left|r_{d}\\right|\\int_{t_{0}}^{t_{1}}w_{d}\\left(\\frac{b^{2}-ac}{a}\\right)^{2}\\left(1-\\frac{\\left(t+\\frac{b}{a}\\right)^{2}}{\\left(\\frac{\\sqrt{b^{2}-ac}}{a}\\right)^{2}}\\right)^{2}dt"},{"type":"expression","id":"291","folderId":"286","color":"#2d70b3","latex":"w_{d}\\left|r_{d}\\right|\\int_{t_{0}}^{t_{1}}\\frac{1}{a^{2}}\\left(\\left(b^{2}-ac\\right)-\\left(at+b\\right)^{2}\\right)^{2}dt"},{"type":"expression","id":"293","folderId":"286","color":"#6042a6","latex":"w_{d}\\left|r_{d}\\right|\\frac{1}{a^{2}}\\int_{\\frac{-b-\\sqrt{b^{2}-ac}}{a}}^{\\frac{-b+\\sqrt{b^{2}-ac}}{a}}\\left(\\left(b^{2}-ac\\right)-\\left(at+b\\right)^{2}\\right)^{2}dt"},{"type":"expression","id":"294","folderId":"286","color":"#aaaaaa","latex":"w_{d}\\left|r_{d}\\right|\\frac{16}{15a^{3}}\\left(b^{2}-ac\\right)^{\\frac{5}{2}}"},{"type":"folder","id":"366","title":"(1-r^2)^3","collapsed":true},{"type":"expression","id":"367","folderId":"366","color":"#c74440","latex":"\\int_{t_{0}}^{t_{1}}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"368","folderId":"366","color":"#2d70b3","latex":"w_{d}\\left|r_{d}\\right|\\frac{32}{35a^{4}}\\left(b^{2}-ac\\right)^{\\frac{7}{2}}"},{"type":"folder","id":"389","title":"1/(r^2+1)^2    [very long]","collapsed":true},{"type":"text","id":"394","folderId":"389","text":"Integral across entire domain"},{"type":"expression","id":"390","folderId":"389","color":"#c74440","latex":"\\int_{-\\infty}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"391","folderId":"389","color":"#2d70b3","latex":"\\left|r_{d}\\right|w_{d}\\int_{-\\infty}^{\\infty}\\frac{1}{\\left(a\\left(t-t_{u}\\right)^{2}+\\left(\\frac{ac-b^{2}}{a}\\right)+1\\right)^{2}}dt"},{"type":"expression","id":"392","folderId":"389","color":"#388c46","latex":"\\left|r_{d}\\right|w_{d}\\frac{\\pi}{2}\\frac{\\sqrt{a\\left(c+1\\right)-b^{2}}}{a\\left(c^{2}+1\\right)+\\left(2a-2b^{2}\\right)c+\\frac{b^{4}}{a}-2b^{2}}"},{"type":"text","id":"396","folderId":"389","text":"Integral across positive domain"},{"type":"expression","id":"397","folderId":"389","color":"#c74440","latex":"\\int_{0}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"406","folderId":"389","color":"#aaaaaa","latex":"\\left|r_{d}\\right|w_{d}\\left(\\frac{a\\left(\\frac{\\pi}{2}-\\arctan\\left(\\frac{-at_{u}}{\\sqrt{a\\left(c+1\\right)-b^{2}}}\\right)\\right)}{2\\left(a\\left(c+1\\right)-b^{2}\\right)^{\\frac{3}{2}}}+\\frac{a^{2}t_{u}}{2\\left(a\\left(c+1\\right)-b^{2}\\right)\\left(a^{2}t_{u}^{2}+a\\left(c+1\\right)-b^{2}\\right)}\\right)"},{"type":"folder","id":"376","title":"sech(r)^2    [N/A]","collapsed":true},{"type":"expression","id":"377","folderId":"376","color":"#6042a6","latex":"\\int_{-\\infty}^{\\infty}D\\left(r_{o}+r_{d}\\cdot t\\right)\\left|r_{d}\\right|dt"},{"type":"expression","id":"379","folderId":"376","color":"#c74440","latex":"\\left|r_{d}\\right|w_{d}\\int_{-\\infty}^{\\infty}\\operatorname{sech}^{2}\\left(\\sqrt{a\\left(t-t_{u}\\right)^{2}+\\left(\\frac{ac-b^{2}}{a}\\right)}\\right)dt"},{"type":"expression","id":"373","color":"#c74440"},{"type":"expression","id":"285","color":"#2d70b3"},{"type":"folder","id":"144","title":"Visualization"},{"type":"expression","id":"145","folderId":"144","color":"#aaaaaa","latex":"r_{dv}\\left(x,y\\right)=\\left(x,y,1\\right)"},{"type":"expression","id":"148","folderId":"144","color":"#388c46","latex":"a_{v}\\left(x,y\\right)=Q_{inv}\\left(r_{dv}\\left(x,y\\right)\\right)\\cdot Q_{inv}\\left(r_{dv}\\left(x,y\\right)\\right)","hidden":true},{"type":"expression","id":"150","folderId":"144","color":"#aaaaaa","latex":"b_{v}\\left(x,y\\right)=Q_{inv}\\left(r_{dv}\\left(x,y\\right)\\right)\\cdot Q_{inv}\\left(m\\right)","hidden":true},{"type":"expression","id":"151","folderId":"144","color":"#c74440","latex":"c_{v}\\left(x,y\\right)=Q_{inv}\\left(m\\right)\\cdot Q_{inv}\\left(m\\right)-\\left\\{G=0:\\ 0,\\ 1\\right\\}","hidden":true},{"type":"text","id":"259","folderId":"144","text":"Gaussian"},{"type":"expression","id":"298","folderId":"144","color":"#388c46","latex":"D_{0}\\left(a_{1},b_{1},c_{1}\\right)=\\exp\\left(\\frac{b_{1}^{2}}{a_{1}}-c_{1}\\right)\\sqrt{\\frac{\\pi}{a_{1}}}"},{"type":"expression","id":"300","folderId":"144","color":"#aaaaaa","latex":"D_{0f}\\left(a_{1},b_{1},c_{1}\\right)=D_{0}\\left(a_{1},b_{1},c_{1}\\right)\\cdot\\frac{1}{2}\\left(\\operatorname{erf}\\left(\\frac{-b_{1}}{\\sqrt{a_{1}}}\\right)+1\\right)"},{"type":"expression","id":"299","folderId":"144","color":"#2d70b3","latex":"D_{0v}\\left(x,y\\right)=1-\\exp\\left(-w_{d}\\left|r_{dv}\\left(x,y\\right)\\right|D_{0}\\left(a_{v}\\left(x,y\\right),b_{v}\\left(x,y\\right),c_{v}\\left(x,y\\right)\\right)\\right)\\left\\{G=0\\right\\}","hidden":true},{"type":"expression","id":"243","folderId":"144","color":"#2d70b3","latex":"D_{0vt}\\left(x,y\\right)=1-\\exp\\left(-w_{d}\\left|r_{dv}\\left(x,y\\right)\\right|D_{0f}\\left(a_{v}\\left(x,y\\right),b_{v}\\left(x,y\\right),c_{v}\\left(x,y\\right)\\right)\\right)\\left\\{G=0\\right\\}"},{"type":"expression","id":"233","folderId":"144","color":"#6042a6","latex":"\\log\\left(D_{0vt}\\left(x,y\\right)\\right)\\left\\{G=0\\right\\}","hidden":true},{"type":"text","id":"280","folderId":"144","text":"1-r^2"},{"type":"expression","id":"301","folderId":"144","color":"#c74440","latex":"D_{1}\\left(a_{1},b_{1},c_{1}\\right)=\\frac{4}{3a_{1}^{2}}\\left(b_{1}^{2}-a_{1}c_{1}\\right)^{\\frac{3}{2}}"},{"type":"expression","id":"281","folderId":"144","color":"#2d70b3","latex":"D_{1v}\\left(x,y\\right)=1-\\exp\\left(-w_{d}\\left|r_{dv}\\left(x,y\\right)\\right|D_{1}\\left(a_{v}\\left(x,y\\right),b_{v}\\left(x,y\\right),c_{v}\\left(x,y\\right)\\right)\\right)\\left\\{G=1\\right\\}"},{"type":"text","id":"296","folderId":"144","text":"(1-r^2)^2"},{"type":"expression","id":"302","folderId":"144","color":"#2d70b3","latex":"D_{2}\\left(a_{1},b_{1},c_{1}\\right)=\\frac{16}{15a_{1}^{3}}\\left(b_{1}^{2}-a_{1}c_{1}\\right)^{\\frac{5}{2}}"},{"type":"expression","id":"297","folderId":"144","color":"#2d70b3","latex":"D_{2v}\\left(x,y\\right)=1-\\exp\\left(-w_{d}\\left|r_{dv}\\left(x,y\\right)\\right|D_{2}\\left(a_{v}\\left(x,y\\right),b_{v}\\left(x,y\\right),c_{v}\\left(x,y\\right)\\right)\\right)\\left\\{G=2\\right\\}"},{"type":"text","id":"370","folderId":"144","text":"(1-r^2)^3"},{"type":"expression","id":"371","folderId":"144","color":"#6042a6","latex":"D_{3}\\left(a_{1},b_{1},c_{1}\\right)=\\frac{32}{35a_{1}^{4}}\\left(b_{1}^{2}-a_{1}c_{1}\\right)^{\\frac{7}{2}}"},{"type":"expression","id":"372","folderId":"144","color":"#2d70b3","latex":"D_{3v}\\left(x,y\\right)=1-\\exp\\left(-w_{d}\\left|r_{dv}\\left(x,y\\right)\\right|D_{3}\\left(a_{v}\\left(x,y\\right),b_{v}\\left(x,y\\right),c_{v}\\left(x,y\\right)\\right)\\right)\\left\\{G=3\\right\\}"},{"type":"folder","id":"dsm-metadata-folder","title":"DesModder Metadata","secret":true},{"type":"text","id":"dsm-metadata","folderId":"dsm-metadata-folder","text":"{\"version\":2,\"expressions\":{\"249\":{\"errorHidden\":true}}}"},{"type":"expression","id":"305","color":"#6042a6"},{"type":"folder","id":"309","title":"Projection - AABB and bounding sphere"},{"type":"expression","id":"318","folderId":"309","color":"#6042a6","latex":"m_{proj}=Q_{inv}\\left(m\\right)","hidden":true},{"type":"expression","id":"314","folderId":"309","color":"#aaaaaa","latex":"a_{proj}\\left(x,y\\right)=Q_{inv}\\left(\\left(x,y,1\\right)\\right)\\cdot Q_{inv}\\left(\\left(x,y,1\\right)\\right)","hidden":true},{"type":"expression","id":"310","folderId":"309","color":"#2d70b3","latex":"b_{proj}\\left(x,y\\right)=Q_{inv}\\left(\\left(x,y,1\\right)\\right)\\cdot m_{proj}","hidden":true},{"type":"expression","id":"319","folderId":"309","color":"#aaaaaa","latex":"c_{proj}=m_{proj}\\cdot m_{proj}-r_{proj}^{2}"},{"type":"expression","id":"316","folderId":"309","color":"#c74440","latex":"a_{proj}\\left(x,y\\right)c_{proj}-b_{proj}\\left(x,y\\right)^{2}=0"},{"type":"expression","id":"321","folderId":"309","color":"#2d70b3","latex":"\\left(Q^{-1}\\left(x,y,1\\right)\\right)^{T}\\left(Q^{-1}\\left(x,y,1\\right)\\right)c-\\left(m^{T}Q^{-1}\\left(x,y,1\\right)\\right)\\left(m^{T}Q^{-1}\\left(x,y,1\\right)\\right)^{T}=0"},{"type":"expression","id":"322","folderId":"309","color":"#388c46","latex":"\\left(x,y,1\\right)^{T}Q^{-T}Q^{-1}\\left(x,y,1\\right)c-\\left(x,y,1\\right)^{T}Q^{-T}mm^{T}Q^{-1}\\left(x,y,1\\right)=0"},{"type":"expression","id":"317","folderId":"309","color":"#388c46","latex":"\\left(x,y,1\\right)^{T}\\left(Q^{-T}Q^{-1}c-\\left(Q^{-T}m\\right)\\left(Q^{-T}m\\right)^{T}\\right)\\left(x,y,1\\right)=0"},{"type":"expression","id":"323","folderId":"309","color":"#6042a6","latex":"\\left|Q_{inv}\\left(\\left(x,y,1\\right)\\right)\\right|^{2}c_{proj}-\\left|m_{proj}\\cdot Q_{inv}\\left(\\left(x,y,1\\right)\\right)\\right|^{2}=0","hidden":true},{"type":"expression","id":"330","folderId":"309","color":"#6042a6","latex":"\\left|Q_{inv}\\left(\\left(x,y,1\\right)\\right)\\right|^{2}c_{proj}-\\left(\\left(x,y,1\\right)\\cdot Q_{invT}\\left(m_{proj}\\right)\\right)^{2}=0","hidden":true},{"type":"expression","id":"339","folderId":"309","color":"#388c46","latex":"m_{proj2}=Q_{invT}\\left(m_{proj}\\right)","hidden":true},{"type":"expression","id":"332","folderId":"309","color":"#c74440","latex":"M_{00}=Q_{invT0}\\cdot Q_{invT0}\\cdot c_{proj}-m_{proj2}.x^{2}"},{"type":"expression","id":"340","folderId":"309","color":"#6042a6","latex":"M_{01}=Q_{invT0}\\cdot Q_{invT1}\\cdot c_{proj}-m_{proj2}.x\\cdot m_{proj2}.y"},{"type":"expression","id":"341","folderId":"309","color":"#aaaaaa","latex":"M_{02}=Q_{invT0}\\cdot Q_{invT2}\\cdot c_{proj}-m_{proj2}.x\\cdot m_{proj2}.z"},{"type":"expression","id":"342","folderId":"309","color":"#c74440","latex":"M_{11}=Q_{invT1}\\cdot Q_{invT1}\\cdot c_{proj}-m_{proj2}.y^{2}"},{"type":"expression","id":"343","folderId":"309","color":"#2d70b3","latex":"M_{12}=Q_{invT1}\\cdot Q_{invT2}\\cdot c_{proj}-m_{proj2}.y\\cdot m_{proj2}.z"},{"type":"expression","id":"345","folderId":"309","color":"#6042a6","latex":"M_{22}=Q_{invT2}\\cdot Q_{invT2}\\cdot c_{proj}-m_{proj2}.z^{2}"},{"type":"expression","id":"348","folderId":"309","color":"#6042a6","latex":"M_{00}x^{2}+2M_{01}xy+M_{11}y^{2}+2M_{02}x+2M_{12}y+M_{22}=0"},{"type":"expression","id":"349","folderId":"309","color":"#388c46","latex":"x_{proj}=\\frac{M_{11}M_{02}-M_{01}M_{12}}{M_{01}^{2}-M_{00}M_{11}}"},{"type":"expression","id":"350","folderId":"309","color":"#6042a6","latex":"y_{proj}=\\frac{M_{00}M_{12}-M_{01}M_{02}}{M_{01}^{2}-M_{00}M_{11}}"},{"type":"expression","id":"351","folderId":"309","color":"#6042a6","latex":"\\left(x_{proj},y_{proj}\\right)"},{"type":"expression","id":"352","folderId":"309","color":"#c74440","latex":"S_{proj}=M_{00}x_{proj}^{2}+2M_{01}x_{proj}y_{proj}+M_{11}y_{proj}^{2}+2M_{02}x_{proj}+2M_{12}y_{proj}+M_{22}"},{"type":"expression","id":"353","folderId":"309","color":"#6042a6","latex":"M_{00}\\left(x-x_{proj}\\right)^{2}+2M_{01}\\left(x-x_{proj}\\right)\\left(y-y_{proj}\\right)+M_{11}\\left(y-y_{proj}\\right)^{2}+S_{proj}=0"},{"type":"expression","id":"356","folderId":"309","color":"#aaaaaa","latex":"w_{proj}=\\sqrt{\\frac{M_{11}S_{proj}}{M_{01}^{2}-M_{00}M_{11}}}"},{"type":"expression","id":"357","folderId":"309","color":"#c74440","latex":"h_{proj}=\\sqrt{\\frac{M_{00}S_{proj}}{M_{01}^{2}-M_{00}M_{11}}}"},{"type":"expression","id":"354","folderId":"309","color":"#388c46","latex":"\\max\\left(\\left|x-x_{proj}\\right|-w_{proj},\\left|y-y_{proj}\\right|-h_{proj}\\right)=0"},{"type":"expression","id":"408","folderId":"309","color":"#2d70b3","latex":"R_{proj}=\\sqrt{\\frac{2S_{proj}}{\\sqrt{\\left(M_{00}-M_{11}\\right)^{2}+4M_{01}^{2}}-\\left(M_{00}+M_{11}\\right)}}"},{"type":"expression","id":"409","folderId":"309","color":"#388c46","latex":"\\operatorname{distance}\\left(\\left(x,y\\right),\\left(x_{proj},y_{proj}\\right)\\right)=R_{proj}"},{"type":"expression","id":"347","color":"#c74440"},{"type":"text","id":"359","text":"https://github.com/harry7557558"}]},"includeFunctionParametersInRandomSeed":true,"doNotMigrate3dLineWidthZero":true}}