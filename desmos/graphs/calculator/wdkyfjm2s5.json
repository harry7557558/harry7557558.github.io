{"hash":"wdkyfjm2s5","parent_hash":"jttqcgkn2i","thumbUrl":"https://www.desmos.com/calc_thumbs/production/wdkyfjm2s5.png","stateUrl":"https://www.desmos.com/calc-states/production/wdkyfjm2s5","title":"Forest Tutorial","access":"link","created":"Tue, 19 Apr 2022 23:46:09 GMT","state":{"version":9,"randomSeed":"51256b8c60681d8a1b59655810173520","graph":{"viewport":{"xmin":-6.695971534849383,"ymin":-3.077405944695629,"xmax":5.618009655942423,"ymax":7.757871658131155},"showGrid":false,"showYAxis":false,"xAxisMinorSubdivisions":1,"yAxisMinorSubdivisions":1},"expressions":{"list":[{"type":"text","id":"87","text":"Demonstrate the use of implicit shapes\n\nAn overview of implicit shapes:\n- Implicit curve: f(x,y)=g(x,y) (no fill)\n- Implicit region: f(x,y)<g(x,y) (fill+dashed line), f(x,y)<=g(x,y) (fill+solid line)\n- Line can be stylized by holding the left icon and check/uncheck the checkbox\n- Often, we let g(x,y)=0\n\nExamples:\n- x\u00b2+y\u00b2=1 (or x\u00b2+y\u00b2-1=0) is a circle\n- ((x-1)/2)\u00b2+((y+1)/3)\u00b2-1=0 is a circle with horizontal compression 1/2, horizontal translation 1, vertical compression 3, vertical translation -1, which is an ellipse\n- max(|x|,|y|)=1 is a square\n- sin(10x+10y)<=0 generates \"stripes\"\n\nOperations:\n- Linear transformations that you may have learned in math class\n- Domain can be restricted by putting inequalities inside the curly brackets {}\n- Max/min to perform boolean operations on the shapes\n- Negative the number to flip inside/outside\n- Adding/subtracting by a number offsets the shape\n- Applying the absolute value function to the domain mirrors the shape\n- Applying a periodic function to the domain repeats the shape\n- Applying the absolute value function to the range and subtracting by a small number \"onions\" the shape"},{"type":"folder","id":"31","title":"Mountain/Path/Moon","collapsed":true},{"type":"text","id":"39","folderId":"31","text":"Mountain\n\ny = arccos(0.9sin(2x))\n- a periodic function with period pi (\"peaks\" of the mountain)\n- inverse trigonometric function and factor 0.9 generates \"smoothed\" sawteeth\n\ny = 0.1exp(...)\n- e^x makes the function positive (the height of the mountain is always positive)\n- vertical compression by 0.1 so it isn't too high\n\n-0.3x\u00b2\n- make the mountain higher in the middle and lower at the ends\n\n{-2.3<x<4}{y>0}\n- restricting the domain, both inequalities must be true for the shape to display\n\nMt(x+2,1.3(y-2.2))\n- horizontal translation 2 left\n- vertical compression 1/1.3\n- vertical translation 2.2 up"},{"type":"expression","id":"32","folderId":"31","color":"#388c46","latex":"M_{t}\\left(x,y\\right)=y-0.1\\exp\\left(\\arccos\\left(0.9\\sin\\left(2x\\right)\\right)-0.3x^{2}\\right)\\left\\{-2.3<x<4\\right\\}\\left\\{y>0\\right\\}"},{"type":"expression","id":"33","folderId":"31","color":"#6042a6","latex":"M_{t}\\left(x+2,1.3\\left(y-2.2\\right)\\right)\\le0"},{"type":"text","id":"41","folderId":"31","text":"Path\n\n(x-1)\u00b2-1 <= 0: a vertical bar, primitive of the path\n(x+y-1)\u00b2-1: make it slanted (linear transform)\n-e^(-y): wider when y is smaller\n\nsubstitute sin(0.8e^y+1) into horizontal translation\n- makes the path \"curved\"\n- 0.8e^y: more curved when y is larger\n- +1: phase shift, can be determined manually"},{"type":"expression","id":"4","folderId":"31","color":"#6042a6","latex":"P\\left(x,y\\right)=\\left(x+y-\\sin\\left(0.8e^{y}+1\\right)\\right)^{2}-e^{-y}\\left\\{0<y<2\\right\\}"},{"type":"expression","id":"34","folderId":"31","color":"#000000","latex":"P\\left(x-1,0.9y\\right)\\le0"},{"type":"text","id":"43","folderId":"31","text":"Moon\n\n(x+2.5)\u00b2-(y-4.5)\u00b2-1\n- a circle with center (-2.5,4.5) and radius 1\n\n(x+2)\u00b2+(y-5)\u00b2-1\n- a circle with center (-2,5) and radius 1\n\nmax(c1,-c2)\n- subtracts shape c2 from c1 (boolean operation)"},{"type":"expression","id":"36","folderId":"31","color":"#fa7e19","latex":"\\max\\left(\\left(x+2.5\\right)^{2}+\\left(y-4.5\\right)^{2}-1,-\\left(\\left(x+2\\right)^{2}+\\left(y-5\\right)^{2}-1\\right)\\right)\\le0"},{"type":"folder","id":"17","title":"Right trees","collapsed":true},{"type":"text","id":"100","folderId":"17","text":"Leaf\n\nx\u00b2+y\u00b2-1: a circle\n(y-3)/2: vertical stretch 2, translate 3 up\n\n|x|^k+y\u00b2-1\n- k=2: a circle\n- as k>2 gets larger, the shape appears more \"square\"\n- as 1<k<2 gets smaller, the shape appears more \"angular\"\n- k=2+sin(y): as y increases, the shape transforms from a circle to a \"rounded square\" (sin(y)>0) then form an angle (sin(y)<0)"},{"type":"expression","id":"1","folderId":"17","color":"#c74440","latex":"R_{leaf}\\left(x,y\\right)=\\left|x\\right|^{\\left(2+\\sin\\left(y\\right)\\right)}+\\left(\\frac{y-3}{2}\\right)^{2}-1"},{"type":"text","id":"103","folderId":"17","text":"Trunk\n\n(10x)\u00b2-1: a vertical \"bar\" with width 2/10=0.2\ne^(-y): thinner as y increases\n-y: clamp bottom\ny-4: clamp top"},{"type":"expression","id":"2","folderId":"17","color":"#2d70b3","latex":"R_{trunk}\\left(x,y\\right)=\\max\\left(\\left(10x\\right)^{2}-e^{-y},-y,y-4\\right)"},{"type":"text","id":"105","folderId":"17","text":"Number of trees"},{"type":"expression","id":"8","folderId":"17","color":"#388c46","latex":"R_{N}=13","slider":{"hardMin":true,"hardMax":true,"min":"1","max":"20","step":"1"}},{"type":"text","id":"107","folderId":"17","text":"generate R_N random points with coordinates between 0 and 1"},{"type":"expression","id":"9","folderId":"17","color":"#6042a6","latex":"R_{p0}=\\left(\\operatorname{random}\\left(R_{N}\\right),\\operatorname{random}\\left(R_{N}\\right)\\right)","hidden":true},{"type":"text","id":"109","folderId":"17","text":"Positions of the trees\n\n4x-0.5: vertical stretch by 4, translate left 0.5\ny+1.1-1.2x: vertical translation 1.1-1.2x, lower as x increases\nx^0.8: slightly shift the trees to the right without changing the range [0,1]"},{"type":"expression","id":"10","folderId":"17","color":"#000000","latex":"R_{p}=\\left(4R_{p0}.x^{0.8}-0.5,R_{p0}.y+1.1-1.2R_{p0}.x\\right)"},{"type":"text","id":"111","folderId":"17","text":"Reciprocal of the size of the trees\n- stretch factor\n\n0.5+0.1random(N)\n- uniformly distributed between 0.5 and 0.6\n\n+0.2x\n- larger when x increases"},{"type":"expression","id":"13","folderId":"17","color":"#388c46","latex":"R_{s}=\\frac{1}{0.5+0.1\\operatorname{random}\\left(R_{N}\\right)+0.2R_{p0}.x}"},{"type":"text","id":"115","folderId":"17","text":"Trees\n- scale by 1/R_s\n- translate by the vector R_p"},{"type":"expression","id":"11","folderId":"17","color":"#c74440","latex":"R_{leaf}\\left(R_{s}\\left(x-R_{p}.x\\right),R_{s}\\left(y-R_{p}.y\\right)\\right)\\le0","lines":false,"colorLatex":"R_{cleaf}","fillOpacity":"0.8"},{"type":"expression","id":"12","folderId":"17","color":"#2d70b3","latex":"R_{trunk}\\left(R_{s}\\left(x-R_{p}.x\\right),R_{s}\\left(y-R_{p}.y\\right)\\right)\\le0","lines":true,"colorLatex":"R_{ctrunk}","fillOpacity":"0.6"},{"type":"text","id":"117","folderId":"17","text":"Colors\nHSV: https://en.wikipedia.org/wiki/HSL_and_HSV\n- hue (0-360), saturation (0-1), value (0-1)"},{"type":"expression","id":"14","folderId":"17","color":"#6042a6","latex":"R_{cleaf}=\\operatorname{hsv}\\left(120\\operatorname{random}\\left(R_{N}\\right)-40,0.8,0.5\\right)"},{"type":"expression","id":"15","folderId":"17","color":"#000000","latex":"R_{ctrunk}=\\operatorname{hsv}\\left(60\\operatorname{random}\\left(R_{N}\\right),0.5,0.2\\right)"},{"type":"folder","id":"19","title":"Left trees","collapsed":true},{"type":"text","id":"119","folderId":"19","text":"Leaves\n\ny = 4(1-|1.5x|)\n- y=1-|x|: a \"triangle\"\n- vertical stretch by 4, horizontal compression by 1/1.5\n\n-sin(y): make it slightly curved\n0.5cos(10y): create the \"layers\" of the tree\n\nmax(...,-y): clip y<0"},{"type":"expression","id":"20","folderId":"19","color":"#388c46","latex":"L_{leaf}\\left(x,y\\right)=\\max\\left(y-4\\left(1-\\left|1.5x\\right|\\right)-\\sin\\left(y\\right)+0.5\\cos\\left(10y\\right),-y\\right)"},{"type":"text","id":"121","folderId":"19","text":"Number of trees"},{"type":"expression","id":"21","folderId":"19","color":"#6042a6","latex":"L_{N}=11","slider":{"hardMin":true,"hardMax":true,"min":"1","max":"20","step":"1"}},{"type":"text","id":"123","folderId":"19","text":"Positions of the trees\n\nL_p0: points with coordinates between 0 and 1\n\n-5x: horizontal reflection (move to left), horizontal stretch by 5\ny-0.5: move up 0.5\n+0.2x: slightly pull down trees on the left (note that x is reflected)"},{"type":"expression","id":"22","folderId":"19","color":"#000000","latex":"L_{p0}=\\left(\\operatorname{random}\\left(L_{N}\\right),\\operatorname{random}\\left(L_{N}\\right)\\right)","hidden":true},{"type":"expression","id":"23","folderId":"19","color":"#000000","latex":"L_{p}=\\left(-5L_{p0}.x,L_{p0}.y-0.5+0.2L_{p0}.x\\right)"},{"type":"text","id":"125","folderId":"19","text":"Reciprocal of the size of the trees\n\n0.4+0.2random(N): uniformly between 0.4 and 0.6\n+0.5x: left trees appear larger (note that x is reflected)"},{"type":"expression","id":"24","folderId":"19","color":"#2d70b3","latex":"L_{s}=\\frac{1}{0.4+0.2\\operatorname{random}\\left(L_{N}\\right)+0.5L_{p0}.x}"},{"type":"text","id":"127","folderId":"19","text":"Trees\n- Scaling by 1/Ls\n- Translation by vectors Lp"},{"type":"expression","id":"25","folderId":"19","color":"#388c46","latex":"L_{leaf}\\left(L_{s}\\left(x-L_{p}.x\\right),L_{s}\\left(y-L_{p}.y\\right)\\right)\\le0","lines":false,"colorLatex":"L_{color}","fillOpacity":"0.8"},{"type":"text","id":"129","folderId":"19","text":"HSV color"},{"type":"expression","id":"26","folderId":"19","color":"#6042a6","latex":"L_{color}=\\operatorname{hsv}\\left(60+100\\operatorname{random}\\left(L_{N}\\right),0.8,0.4\\right)"},{"type":"folder","id":"dsm-metadata-folder","title":"DesModder Metadata","secret":true},{"type":"text","id":"dsm-metadata","folderId":"dsm-metadata-folder","text":"{\"version\":2,\"expressions\":{\"1\":{\"errorHidden\":true},\"2\":{\"errorHidden\":true},\"8\":{\"errorHidden\":true},\"11\":{\"errorHidden\":true},\"13\":{\"errorHidden\":true},\"21\":{\"errorHidden\":true}}}"}]}}}