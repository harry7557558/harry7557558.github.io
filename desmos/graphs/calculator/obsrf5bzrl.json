{"hash":"obsrf5bzrl","parent_hash":"63csx4qdnt","thumbUrl":"https://www.desmos.com/calc_thumbs/production/obsrf5bzrl.png","stateUrl":"https://www.desmos.com/calc-states/production/obsrf5bzrl","title":"Action Test","access":"link","created":"Tue, 14 Jun 2022 22:39:35 GMT","state":{"version":9,"randomSeed":"14f3a63e0c7d94881035242a4c8c6bb5","graph":{"viewport":{"xmin":-4.406181996579204,"ymin":-4.006469958450077,"xmax":4.687793763737322,"ymax":3.9334245319882806}},"expressions":{"list":[{"type":"text","id":"36","text":"This is my first time to play with the \"action\" feature in Desmos.\nI try to create a bouncing ball with collision response that conserves energy."},{"type":"expression","id":"356","color":"#2d70b3","latex":"d_{t}=5\\cdot10^{-2}","labelSize":"medium","slider":{"hardMax":true,"max":"1","step":"0.01"}},{"type":"expression","id":"3","color":"#388c46","latex":"R_{eset}\\left(\\left(1,1\\right),\\left(-5,2\\right),d_{t}\\right),\\ P_{s}\\to\\left[\\right]"},{"type":"folder","id":"362","title":"Miscellaneous Math","collapsed":true},{"type":"expression","id":"363","folderId":"362","color":"#c74440","latex":"d_{ot}\\left(v_{1},v_{2}\\right)=v_{1}.xv_{2}.x+v_{1}.yv_{2}.y"},{"type":"expression","id":"382","folderId":"362","color":"#2d70b3","latex":"d_{ot2}\\left(v_{1}\\right)=d_{ot}\\left(v_{1},v_{1}\\right)","labelSize":"medium"},{"type":"expression","id":"375","folderId":"362","color":"#000000","latex":"r_{eflect}\\left(d,n\\right)=d-\\frac{2\\cdot d_{ot}\\left(d,n\\right)}{d_{ot2}\\left(n\\right)+10^{-16}}\\cdot n"},{"type":"folder","id":"21","title":"Object","collapsed":true},{"type":"expression","id":"4","folderId":"21","color":"#6042a6","latex":"r=0.25","hidden":true,"labelSize":"medium","slider":{"hardMin":true,"min":"0"}},{"type":"expression","id":"2","folderId":"21","color":"#2d70b3","latex":"p=\\left(0.7074900951898067,0.22264341637929566\\right)","labelSize":"medium"},{"type":"expression","id":"18","folderId":"21","color":"#388c46","latex":"p_{prev}=\\left(1,1\\right)","hidden":true},{"type":"expression","id":"8","folderId":"21","color":"#388c46","latex":"v=\\left(4.577820849825682,-4.825980123086829\\right)","hidden":true},{"type":"expression","id":"373","folderId":"21","color":"#388c46","latex":"v_{prev}=\\left(-5,2\\right)","hidden":true},{"type":"expression","id":"5","folderId":"21","color":"#000000","latex":"\\operatorname{distance}\\left(\\left(x,y\\right),p\\right)=r","labelSize":"medium"},{"type":"expression","id":"1","folderId":"21","color":"#c74440","latex":"R_{eset}\\left(p_{0},v_{0},h\\right)=p\\to p_{0}+v_{0}h+\\frac{1}{2}F\\left(p_{0}\\right)h^{2},\\ p_{prev}\\to p_{0},\\ v\\to v_{0}+F\\left(p_{0}\\right)h,\\ v_{prev}\\to v_{0}","labelSize":"medium"},{"type":"text","id":"355","folderId":"21","text":"Energy, should stay the same for a \"good\" integrator"},{"type":"expression","id":"401","folderId":"21","color":"#000000","latex":"E_{grav}\\left(p_{0}\\right)=-d_{ot}\\left(p_{0}-\\left(0,-2\\right),g\\right)"},{"type":"expression","id":"384","folderId":"21","color":"#6042a6","latex":"E\\left(p_{0},v_{0}\\right)=E_{grav}\\left(p_{0}\\right)+\\frac{1}{2}d_{ot2}\\left(v_{0}\\right)"},{"type":"expression","id":"351","folderId":"21","color":"#388c46","latex":"y=0.25\\sqrt{E\\left(p,v\\right)}"},{"type":"text","id":"390","folderId":"21","text":"Previous positions"},{"type":"expression","id":"386","folderId":"21","color":"#fa7e19","latex":"P_{s}=\\left[\\left(-2.039202414705603,1.3530344902313929\\right),\\left(-1.810311372214319,1.3936766715770514\\right),\\left(-1.5814203297230347,1.40980222792271\\right),\\left(-1.3525292872317505,1.4014111592683687\\right),\\left(-1.1236382447404663,1.3685034656140271\\right),\\left(-0.8947472022491821,1.3110791469596856\\right),\\left(-0.665856159757898,1.2291382033053442\\right),\\left(-0.4369651172666139,1.1226806346510028\\right),\\left(-0.2080740747753298,0.9917064409966614\\right),\\left(0.020816967715954315,0.8362156223423199\\right),\\left(0.24970801020723843,0.6562081786879785\\right),\\left(0.47859905269852254,0.4516841100336371\\right)\\right]","lines":true},{"type":"expression","id":"391","folderId":"21","color":"#000000","latex":"P_{ushP}\\left(\\right)=P_{s}\\to\\operatorname{join}\\left(P_{s},\\left[p\\right]\\right)\\left[\\max\\left(1,\\operatorname{length}\\left(P_{s}\\right)-10\\right)...\\operatorname{length}\\left(P_{s}\\right)+1\\right]"},{"type":"folder","id":"25","title":"Boundary","collapsed":true},{"type":"text","id":"27","folderId":"25","text":"SDF"},{"type":"expression","id":"6","folderId":"25","color":"#c74440","latex":"S\\left(x,y\\right)=\\max\\left(\\left|x\\right|-3,\\frac{y+0.1\\left|x\\right|}{\\sqrt{1.01}}-2,-y-2,\\frac{-2y-x}{\\sqrt{5}}-1,-\\max\\left(x+\\frac{1}{2},y\\right),0.1-\\sqrt{\\left(x-2\\right)^{2}+y^{2}}\\right)"},{"type":"expression","id":"7","folderId":"25","color":"#2d70b3","latex":"S\\left(x,y\\right)\\ge0"},{"type":"expression","id":"33","folderId":"25","color":"#2d70b3","latex":"C\\left(p_{0}\\right)=S\\left(p_{0}.x,p_{0}.y\\right)+r"},{"type":"text","id":"30","folderId":"25","text":"Normal"},{"type":"expression","id":"16","folderId":"25","color":"#c74440","latex":"N\\left(p_{0}\\right)=\\left(\\frac{S\\left(p_{0}.x+0.001,p_{0}.y\\right)-S\\left(p_{0}.x-0.001,p_{0}.y\\right)}{0.002},\\frac{S\\left(p_{0}.x,p_{0}.y+0.001\\right)-S\\left(p_{0}.x,p_{0}.y-0.001\\right)}{0.002}\\right)","labelSize":"medium"},{"type":"text","id":"32","folderId":"25","text":"Acceleration due to gravity"},{"type":"expression","id":"352","folderId":"25","color":"#6042a6","latex":"g=\\left(0,-9.80665\\right)","hidden":true,"dragMode":"NONE","slider":{"hardMin":true,"hardMax":true,"min":"9.79","max":"9.82"}},{"type":"text","id":"368","folderId":"25","text":"Net acceleration with penalty, for force-based updates"},{"type":"expression","id":"12","folderId":"25","color":"#2d70b3","latex":"F\\left(p_{0}\\right)=-10000N\\left(p_{0}\\right)\\max\\left(C\\left(p_{0}\\right),0\\right)+g"},{"type":"folder","id":"342","title":"Force-based updates for reference","collapsed":true},{"type":"text","id":"348","folderId":"342","text":"Goes crazy"},{"type":"expression","id":"345","folderId":"342","color":"#6042a6","latex":"U_{pdateEuler}\\left(h\\right)=p\\to p+vh+\\frac{1}{2}F\\left(p\\right)h^{2},\\ v\\to v+F\\left(p\\right)h"},{"type":"text","id":"366","folderId":"342","text":"Semi-implicit Euler"},{"type":"expression","id":"364","folderId":"342","color":"#2d70b3","latex":"U_{pdateEulerSI}\\left(h\\right)=p\\to p+\\left(v+F\\left(p\\right)h\\right)h,\\ v\\to v+F\\left(p\\right)h"},{"type":"text","id":"350","folderId":"342","text":"Doesn't \"blow off\" for a while with dt=0.01"},{"type":"expression","id":"19","folderId":"342","color":"#6042a6","latex":"U_{pdateVerlet}\\left(h\\right)=p\\to2p-p_{prev}+F\\left(p\\right)h^{2},\\ p_{prev}\\to p,\\ v\\to\\frac{p-p_{prev}}{h}+F\\left(p\\right)h"},{"type":"folder","id":"357","title":"An attempt for collision detection"},{"type":"text","id":"403","folderId":"357","text":"Forward Euler"},{"type":"expression","id":"381","folderId":"357","color":"#c74440","latex":"p_{Euler}\\left(p_{0},v_{0},h\\right)=p_{0}+v_{0}h+\\frac{1}{2}gh^{2}"},{"type":"expression","id":"385","folderId":"357","color":"#c74440","latex":"U_{pdateCdEuler}\\left(h\\right)=p\\to p_{Euler}\\left(p,v,h\\right),\\ v\\to v+gh"},{"type":"text","id":"405","folderId":"357","text":"Linear interpolate collision time"},{"type":"expression","id":"358","folderId":"357","color":"#388c46","latex":"t_{cd1}\\left(p_{0},v_{0},h\\right)=-\\frac{C\\left(p_{0}\\right)}{C\\left(p_{Euler}\\left(p_{0},v_{0},h\\right)\\right)-C\\left(p_{0}\\right)}","labelSize":"medium"},{"type":"text","id":"407","folderId":"357","text":"Collision response, reflect"},{"type":"expression","id":"374","folderId":"357","color":"#6042a6","latex":"p_{cd1r}\\left(p_{0},v_{0},n,t,h\\right)=p_{0}+v_{0}ht+r_{eflect}\\left(v_{0},n\\right)h\\left(1-t\\right)+\\frac{1}{2}gh^{2}","labelSize":"medium"},{"type":"expression","id":"383","folderId":"357","color":"#388c46","latex":"p_{cd1}\\left(h\\right)=p_{cd1r}\\left(p,v,N\\left(p\\right),t_{cd1}\\left(p,v,h\\right),h\\right)"},{"type":"expression","id":"376","folderId":"357","color":"#c74440","latex":"v_{cd1}\\left(h\\right)=r_{eflect}\\left(v,N\\left(p\\right)\\right)+gh"},{"type":"text","id":"409","folderId":"357","text":"Enforce energy conservation"},{"type":"expression","id":"388","folderId":"357","color":"#388c46","latex":"E_{mCd1}\\left(h\\right)=\\frac{\\sqrt{\\max\\left(2\\left(E\\left(p,v\\right)-E_{grav}\\left(p_{cd1}\\left(h\\right)\\right)\\right),10^{-32}\\right)}}{\\sqrt{d_{ot2}\\left(v_{cd1}\\left(h\\right)\\right)}+10^{-16}}","hidden":true},{"type":"expression","id":"377","folderId":"357","color":"#2d70b3","latex":"U_{pdateCd1r}\\left(h\\right)=p\\to p_{cd1}\\left(h\\right),\\ v\\to v_{cd1}\\left(h\\right)\\cdot E_{mCd1}\\left(h\\right)"},{"type":"expression","id":"379","folderId":"357","color":"#6042a6","latex":"U_{pdateCd1}\\left(h\\right)=\\left\\{C\\left(p_{Euler}\\left(p,v,h\\right)\\right)>0:U_{pdateCd1r}\\left(h\\right),U_{pdateCdEuler}\\left(h\\right)\\right\\}"},{"type":"expression","id":"378","color":"#388c46","latex":"U_{pdate}\\left(h\\right)=U_{pdateCd1}\\left(h\\right),\\ P_{ushP}\\left(\\right)"},{"type":"expression","id":"392","color":"#c74440","latex":"U_{pdate}\\left(d_{t}\\right)"},{"type":"expression","id":"397","color":"#c74440"}],"ticker":{"handlerLatex":"U_{pdate}\\left(d_{t}\\right)","minStepLatex":"50","playing":true,"open":true}}}}