{"hash":"zccocbuygk","parent_hash":"q9jznsiaru","thumbUrl":"https://www.desmos.com/calc_thumbs/production/zccocbuygk.png","stateUrl":"https://www.desmos.com/calc-states/production/zccocbuygk","title":"Cook-Torrance BRDF","access":"link","created":"Mon, 11 Oct 2021 19:33:48 GMT","state":{"version":9,"randomSeed":"feb96eabeafe8ce9b44b57443ad49d54","graph":{"viewport":{"xmin":-0.724101954712737,"ymin":-0.3184139876123722,"xmax":0.6633811809624921,"ymax":0.47870143302020124},"showGrid":false,"showXAxis":false,"showYAxis":false},"expressions":{"list":[{"type":"expression","id":"1","color":"#c74440","latex":"r_{x}=0.28","slider":{"hardMin":true,"hardMax":true,"playDirection":-1,"min":"0","max":"\\frac{\\pi}{2}","step":"0.001"}},{"type":"expression","id":"3","color":"#388c46","latex":"r_{z}=4.85","slider":{"hardMin":true,"hardMax":true,"loopMode":"LOOP_FORWARD","min":"0","max":"2\\pi","step":"0.001"}},{"type":"expression","id":"318","color":"#c74440","latex":"\\phi_{i}=0","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"2\\pi"}},{"type":"expression","id":"317","color":"#000000","latex":"\\theta_{i}=0.84","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"\\frac{\\pi}{2}"}},{"type":"folder","id":"316","title":"Incoming light and half vector","collapsed":true},{"type":"expression","id":"372","folderId":"316","color":"#000000","latex":"\\omega_{ix}=\\cos\\left(\\phi_{i}\\right)\\sin\\left(\\theta_{i}\\right)"},{"type":"expression","id":"373","folderId":"316","color":"#c74440","latex":"\\omega_{iy}=\\sin\\left(\\phi_{i}\\right)\\sin\\left(\\theta_{i}\\right)"},{"type":"expression","id":"374","folderId":"316","color":"#2d70b3","latex":"\\omega_{iz}=\\cos\\left(\\theta_{i}\\right)"},{"type":"expression","id":"319","folderId":"316","color":"#000000","latex":"\\left(X_{s}\\left(\\omega_{ix},\\omega_{iy},\\omega_{iz}\\right),Y_{s}\\left(\\omega_{ix},\\omega_{iy},\\omega_{iz}\\right)\\right)t"},{"type":"text","id":"380","folderId":"316","text":"\u03c9h = normalize(\u03c9i+\u03c9o)"},{"type":"expression","id":"360","folderId":"316","color":"#388c46","latex":"\\omega_{ox}\\left(\\phi_{o},\\theta_{o}\\right)=\\cos\\left(\\phi_{o}\\right)\\sin\\left(\\theta_{o}\\right)"},{"type":"expression","id":"369","folderId":"316","color":"#2d70b3","latex":"\\omega_{oy}\\left(\\phi_{o},\\theta_{o}\\right)=\\sin\\left(\\phi_{o}\\right)\\sin\\left(\\theta_{o}\\right)"},{"type":"expression","id":"370","folderId":"316","color":"#388c46","latex":"\\omega_{oz}\\left(\\phi_{o},\\theta_{o}\\right)=\\cos\\left(\\theta_{o}\\right)"},{"type":"expression","id":"371","folderId":"316","color":"#6042a6","latex":"l_{wh}\\left(\\phi_{o},\\theta_{o}\\right)=\\sqrt{\\left(\\omega_{ix}+\\omega_{ox}\\left(\\phi_{o},\\theta_{o}\\right)\\right)^{2}+\\left(\\omega_{iy}+\\omega_{oy}\\left(\\phi_{o},\\theta_{o}\\right)\\right)^{2}+\\left(\\omega_{iz}+\\omega_{oz}\\left(\\phi_{o},\\theta_{o}\\right)\\right)^{2}}"},{"type":"expression","id":"365","folderId":"316","color":"#388c46","latex":"\\omega_{hx}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{\\omega_{ix}+\\omega_{ox}\\left(\\phi_{o},\\theta_{o}\\right)}{l_{wh}\\left(\\phi_{o},\\theta_{o}\\right)}"},{"type":"expression","id":"375","folderId":"316","color":"#388c46","latex":"\\omega_{hy}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{\\omega_{iy}+\\omega_{oy}\\left(\\phi_{o},\\theta_{o}\\right)}{l_{wh}\\left(\\phi_{o},\\theta_{o}\\right)}"},{"type":"expression","id":"376","folderId":"316","color":"#6042a6","latex":"\\omega_{hz}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{\\omega_{iz}+\\omega_{oz}\\left(\\phi_{o},\\theta_{o}\\right)}{l_{wh}\\left(\\phi_{o},\\theta_{o}\\right)}"},{"type":"expression","id":"359","color":"#2d70b3","latex":"\\alpha=0.33","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"1"}},{"type":"folder","id":"356","title":"GGX","collapsed":true},{"type":"expression","id":"382","folderId":"356","color":"#6042a6","latex":"D_{ggx}\\left(\\theta\\right)=\\frac{\\alpha^{2}}{\\pi\\left(\\left(\\alpha^{2}-1\\right)\\cos\\left(\\theta\\right)^{2}+1\\right)^{2}}","hidden":true},{"type":"expression","id":"381","folderId":"356","color":"#388c46","latex":"D\\left(\\phi_{o},\\theta_{o}\\right)=\\max\\left(D_{ggx}\\left(\\arccos\\left(\\omega_{hz}\\left(\\phi_{o},\\theta_{o}\\right)\\right)\\right),0\\right)"},{"type":"text","id":"413","folderId":"356","text":"Test energy conservation"},{"type":"expression","id":"411","folderId":"356","color":"#2d70b3","latex":"\\int_{0}^{2\\pi}\\int_{0}^{\\frac{\\pi}{2}}D_{ggx}\\left(\\theta\\right)\\cos\\left(\\theta\\right)\\cdot\\sin\\left(\\theta\\right)d\\theta d\\phi"},{"type":"expression","id":"410","folderId":"356","color":"#c74440","latex":"\\int_{0}^{2\\pi}\\int_{0}^{\\frac{\\pi}{2}}\\frac{D\\left(\\phi,\\theta\\right)\\cos\\left(\\theta\\right)}{4\\cos\\left(\\theta\\right)\\cos\\left(\\theta_{i}\\right)}\\cdot\\sin\\left(\\theta\\right)d\\theta d\\phi"},{"type":"folder","id":"357","title":"Geometry","collapsed":true},{"type":"expression","id":"405","folderId":"357","color":"#000000","latex":"\\Lambda\\left(\\theta\\right)=\\frac{\\sqrt{1+\\alpha^{2}\\tan\\left(\\theta\\right)^{2}}-1}{2}","hidden":true},{"type":"expression","id":"329","folderId":"357","color":"#388c46","latex":"G_{1}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{1}{1+\\Lambda\\left(\\theta_{i}\\right)}\\cdot\\frac{1}{1+\\Lambda\\left(\\theta_{o}\\right)}"},{"type":"expression","id":"406","folderId":"357","color":"#388c46","latex":"G_{2}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{1}{1+\\Lambda\\left(\\theta_{i}\\right)+\\Lambda\\left(\\theta_{o}\\right)}"},{"type":"expression","id":"407","folderId":"357","color":"#6042a6","latex":"G\\left(\\phi_{o},\\theta_{o}\\right)=G_{2}\\left(\\phi_{o},\\theta_{o}\\right)"},{"type":"folder","id":"312","title":"Fresnel","collapsed":true},{"type":"expression","id":"347","folderId":"312","color":"#6042a6","latex":"\\eta_{1}=1","slider":{"hardMin":true,"hardMax":true,"min":"1","max":"2.5"}},{"type":"expression","id":"348","folderId":"312","color":"#000000","latex":"\\eta_{2}=1.5","slider":{"hardMin":true,"hardMax":true,"min":"1","max":"2.5"}},{"type":"expression","id":"352","folderId":"312","color":"#6042a6","latex":"\\eta_{k}=2","slider":{"hardMin":true,"hardMax":true,"min":"0","max":"6"}},{"type":"expression","id":"349","folderId":"312","color":"#c74440","latex":"f_{d0}=\\left(\\frac{\\eta_{1}-\\eta_{2}}{\\eta_{1}+\\eta_{2}}\\right)^{2}"},{"type":"expression","id":"350","folderId":"312","color":"#2d70b3","latex":"F_{d}\\left(\\theta\\right)=f_{d0}+\\left(1-f_{d0}\\right)\\left(1-\\cos\\left(\\theta\\right)\\right)^{5}\\left\\{\\left|\\theta\\right|\\le\\frac{\\pi}{2}\\right\\}","hidden":true},{"type":"expression","id":"351","folderId":"312","color":"#388c46","latex":"F_{c}\\left(\\theta\\right)=\\frac{\\left(\\eta_{2}-1\\right)^{2}+4\\eta_{2}\\left(1-\\cos\\left(\\theta\\right)\\right)^{5}+\\eta_{k}^{2}}{\\left(\\eta_{2}+1\\right)^{2}+\\eta_{k}^{2}}\\left\\{\\left|\\theta\\right|\\le\\frac{\\pi}{2}\\right\\}","hidden":true},{"type":"expression","id":"409","folderId":"312","color":"#c74440","latex":"F_{a}\\left(\\phi_{o},\\theta_{o}\\right)=\\arccos\\left(\\omega_{ox}\\left(\\phi_{o},\\theta_{o}\\right)\\omega_{hx}\\left(\\phi_{o},\\theta_{o}\\right)+\\omega_{oy}\\left(\\phi_{o},\\theta_{o}\\right)\\omega_{hy}\\left(\\phi_{o},\\theta_{o}\\right)+\\omega_{oz}\\left(\\phi_{o},\\theta_{o}\\right)\\omega_{hz}\\left(\\phi_{o},\\theta_{o}\\right)\\right)"},{"type":"expression","id":"328","folderId":"312","color":"#2d70b3","latex":"F\\left(\\phi_{o},\\theta_{o}\\right)=F_{c}\\left(F_{a}\\left(\\phi_{o},\\theta_{o}\\right)\\right)"},{"type":"folder","id":"358","title":"BRDF"},{"type":"expression","id":"311","folderId":"358","color":"#c74440","latex":"F_{r}\\left(\\phi_{o},\\theta_{o}\\right)=\\frac{D\\left(\\phi_{o},\\theta_{o}\\right)G\\left(\\phi_{o},\\theta_{o}\\right)F\\left(\\phi_{o},\\theta_{o}\\right)}{4\\cos\\left(\\theta_{i}\\right)\\cos\\left(\\theta_{o}\\right)}"},{"type":"expression","id":"323","folderId":"358","color":"#c74440","latex":"\\int_{0}^{2\\pi}\\int_{0}^{\\frac{\\pi}{2}}F_{r}\\left(u,v\\right)\\cos\\left(v\\right)\\cdot\\sin\\left(v\\right)dvdu"},{"type":"folder","id":"81","title":"Graphing","collapsed":true},{"type":"text","id":"332","folderId":"81","text":"Projection"},{"type":"expression","id":"6","folderId":"81","color":"#c74440","latex":"A_{1}=\\left[-\\sin\\left(r_{z}\\right),\\cos\\left(r_{z}\\right),0\\right]"},{"type":"expression","id":"13","folderId":"81","color":"#2d70b3","latex":"A_{2}=\\left[-\\cos\\left(r_{z}\\right)\\sin\\left(r_{x}\\right),-\\sin\\left(r_{z}\\right)\\sin\\left(r_{x}\\right),\\cos\\left(r_{x}\\right)\\right]"},{"type":"expression","id":"321","folderId":"81","color":"#6042a6","latex":"X_{s}\\left(x,y,z\\right)=A_{1}\\left[1\\right]x+A_{1}\\left[2\\right]y+A_{1}\\left[3\\right]z"},{"type":"expression","id":"322","folderId":"81","color":"#000000","latex":"Y_{s}\\left(x,y,z\\right)=A_{2}\\left[1\\right]x+A_{2}\\left[2\\right]y+A_{2}\\left[3\\right]z"},{"type":"text","id":"334","folderId":"81","text":"Axes"},{"type":"expression","id":"325","folderId":"81","color":"#388c46","latex":"c_{rgb}=\\left[\\operatorname{rgb}\\left(255,0,0\\right),\\operatorname{rgb}\\left(0,128,0\\right),\\operatorname{rgb}\\left(0,0,255\\right)\\right]"},{"type":"expression","id":"326","folderId":"81","color":"#6042a6","latex":"\\left(A_{1}t,\\ A_{2}t\\right)","parametricDomain":{"min":"-0.5","max":"0.5"},"colorLatex":"c_{rgb}","domain":{"min":"-0.5","max":"0.5"}},{"type":"text","id":"336","folderId":"81","text":"Parametric surface"},{"type":"expression","id":"83","folderId":"81","color":"#388c46","latex":"X\\left(u,v\\right)=F_{r}\\left(u,v\\right)\\cos\\left(v\\right)\\cdot\\cos\\left(u\\right)\\sin\\left(v\\right)"},{"type":"expression","id":"85","folderId":"81","color":"#6042a6","latex":"Y\\left(u,v\\right)=F_{r}\\left(u,v\\right)\\cos\\left(v\\right)\\cdot\\sin\\left(u\\right)\\sin\\left(v\\right)"},{"type":"expression","id":"86","folderId":"81","color":"#000000","latex":"Z\\left(u,v\\right)=F_{r}\\left(u,v\\right)\\cos\\left(v\\right)\\cdot\\cos\\left(v\\right)"},{"type":"expression","id":"89","folderId":"81","color":"#388c46","latex":"u_{1}=2\\pi"},{"type":"expression","id":"87","folderId":"81","color":"#c74440","latex":"u_{N}=20","slider":{"hardMin":true,"hardMax":true,"min":"8","max":"40","step":"1"}},{"type":"expression","id":"90","folderId":"81","color":"#6042a6","latex":"v_{1}=\\frac{\\pi}{2}"},{"type":"expression","id":"88","folderId":"81","color":"#2d70b3","latex":"v_{N}=12","slider":{"hardMin":true,"hardMax":true,"min":"8","max":"40","step":"1"}},{"type":"expression","id":"306","folderId":"81","color":"#c74440","latex":"U=\\frac{u_{1}}{u_{N}}\\cdot\\left[0,1,2...u_{N}\\right]"},{"type":"expression","id":"307","folderId":"81","color":"#2d70b3","latex":"V=\\frac{v_{1}}{v_{N}}\\cdot\\left[0,1,2...v_{N}\\right]"},{"type":"expression","id":"308","folderId":"81","color":"#fa7e19","latex":"\\left(X_{s}\\left(X\\left(U,t\\right),Y\\left(U,t\\right),Z\\left(U,t\\right)\\right),\\ Y_{s}\\left(X\\left(U,t\\right),Y\\left(U,t\\right),Z\\left(U,t\\right)\\right)\\right)","parametricDomain":{"min":"0","max":"v_{1}"},"domain":{"min":"0","max":"v_{1}"}},{"type":"expression","id":"309","folderId":"81","color":"#fa7e19","latex":"\\left(X_{s}\\left(X\\left(t,V\\right),Y\\left(t,V\\right),Z\\left(t,V\\right)\\right),\\ Y_{s}\\left(X\\left(t,V\\right),Y\\left(t,V\\right),Z\\left(t,V\\right)\\right)\\right)","parametricDomain":{"min":"0","max":"u_{1}"},"domain":{"min":"0","max":"u_{1}"}},{"type":"text","id":"338","folderId":"81","text":"Show energy conservation boundary"},{"type":"expression","id":"310","folderId":"81","color":"#fa7e19","latex":"x^{2}+y^{2}=\\frac{1}{\\pi^{2}}","lineStyle":"DASHED","lineOpacity":"0.3"},{"type":"folder","id":"393","title":"GGX normal importance sampling","hidden":true,"collapsed":true},{"type":"expression","id":"395","folderId":"393","color":"#c74440","latex":"2\\pi\\int_{0}^{\\frac{\\pi}{2}}D_{ggx}\\left(\\theta\\right)\\sin\\left(\\theta\\right)\\cos\\left(\\theta\\right)d\\theta"},{"type":"expression","id":"397","folderId":"393","color":"#388c46","latex":"D_{I}\\left(\\theta\\right)=\\frac{1}{\\alpha^{2}-1}\\left(\\frac{\\alpha^{2}}{\\left(\\alpha^{2}-1\\right)\\cos\\left(\\theta\\right)^{2}+1}-1\\right)\\left\\{0\\le\\theta\\le\\frac{\\pi}{2}\\right\\}"},{"type":"expression","id":"399","folderId":"393","color":"#000000","latex":"D_{inv}\\left(x\\right)=\\arccos\\left(\\sqrt{\\frac{1-x}{\\left(\\alpha^{2}-1\\right)x+1}}\\right)\\left\\{0\\le x\\le1\\right\\}"},{"type":"expression","id":"402","folderId":"393","color":"#388c46","latex":"S_{u}=2\\pi\\operatorname{random}\\left(1000\\right)"},{"type":"expression","id":"401","folderId":"393","color":"#2d70b3","latex":"S_{v}=D_{inv}\\left(\\operatorname{random}\\left(1000\\right)\\right)"},{"type":"expression","id":"403","folderId":"393","color":"#6042a6","latex":"\\left(X_{s}\\left(\\cos\\left(S_{u}\\right)\\sin\\left(S_{v}\\right),\\sin\\left(S_{u}\\right)\\sin\\left(S_{v}\\right),\\cos\\left(S_{v}\\right)\\right),Y_{s}\\left(\\cos\\left(S_{u}\\right)\\sin\\left(S_{v}\\right),\\sin\\left(S_{u}\\right)\\sin\\left(S_{v}\\right),\\cos\\left(S_{v}\\right)\\right)\\right)"}]}}}