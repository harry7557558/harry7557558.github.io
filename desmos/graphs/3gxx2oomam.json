{"hash":"3gxx2oomam","parent_hash":"h9htzclgvf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/3gxx2oomam.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/3gxx2oomam","title":"Bouncing Rigid Body","access":"link","created":"Sat, 18 Jun 2022 01:52:17 GMT","state":{"version":9,"randomSeed":"14f3a63e0c7d94881035242a4c8c6bb5","graph":{"viewport":{"xmin":-3.701526454701833,"ymin":-3.8099606902384635,"xmax":4.857509555007848,"ymax":3.5114941611177293}},"expressions":{"list":[{"type":"text","id":"36","text":"Simulating a bouncing rigid body that conserves energy. It has both linear and angular positions and velocities."},{"type":"expression","id":"356","color":"#2d70b3","latex":"d_{t}=5\\cdot10^{-2}","labelSize":"medium","slider":{"hardMax":true,"max":"1","step":"0.01"}},{"type":"expression","id":"3","color":"#388c46","latex":"R_{eset}\\left(\\left(1,1\\right),-\\left(-5,2\\right),0,0,d_{t}\\right),\\ P_{s}\\to\\left[\\right]"},{"type":"folder","id":"362","title":"Miscellaneous Math","collapsed":true},{"type":"expression","id":"363","folderId":"362","color":"#c74440","latex":"d_{ot}\\left(v_{1},v_{2}\\right)=v_{1}.xv_{2}.x+v_{1}.yv_{2}.y"},{"type":"expression","id":"439","folderId":"362","color":"#2d70b3","latex":"d_{et}\\left(v_{1},v_{2}\\right)=v_{1}.xv_{2}.y-v_{1}.yv_{2}.x"},{"type":"expression","id":"382","folderId":"362","color":"#2d70b3","latex":"d_{ot2}\\left(v_{1}\\right)=d_{ot}\\left(v_{1},v_{1}\\right)","labelSize":"medium"},{"type":"expression","id":"469","folderId":"362","color":"#c74440","latex":"r_{ot}\\left(v_{1}\\right)=\\left(-v_{1}.y,v_{1}.x\\right)"},{"type":"expression","id":"528","folderId":"362","color":"#388c46","latex":"n_{ormalize}\\left(v_{1}\\right)=\\frac{v_{1}}{\\sqrt{v_{1}.x^{2}+v_{1}.y^{2}}}"},{"type":"expression","id":"375","folderId":"362","color":"#000000","latex":"r_{eflect}\\left(d,n\\right)=d-\\frac{2\\cdot d_{ot}\\left(d,n\\right)}{d_{ot2}\\left(n\\right)+10^{-16}}\\cdot n"},{"type":"expression","id":"432","folderId":"362","color":"#000000","latex":"t_{otalPoints}\\left(p_{oints}\\right)=\\left(\\operatorname{total}\\left(p_{oints}.x\\right),\\operatorname{total}\\left(p_{oints}.y\\right)\\right)"},{"type":"expression","id":"437","folderId":"362","color":"#000000","latex":"m_{eanPoints}\\left(p_{oints}\\right)=\\left(\\operatorname{mean}\\left(p_{oints}.x\\right),\\operatorname{mean}\\left(p_{oints}.y\\right)\\right)"},{"type":"folder","id":"21","title":"Object","collapsed":true},{"type":"text","id":"413","folderId":"21","text":"Unrotated geometry with COM at the origin"},{"type":"expression","id":"410","folderId":"21","color":"#c74440","latex":"r=0.2\\cdot\\left[\\left(-2,-1\\right),\\left(-1,-0.83\\right),\\left(0,-0.67\\right),\\left(1,-0.5\\right),\\left(0.75,0.5\\right),\\left(0.5,1.5\\right),\\left(-0.33,0.67\\right),\\left(-1.17,-0.17\\right)\\right]","hidden":true,"lines":false,"labelSize":"medium"},{"type":"text","id":"443","folderId":"21","text":"Ratio between moment of inertia and mass, intentionally increased by a factor for visual content"},{"type":"expression","id":"447","folderId":"21","color":"#6042a6","latex":"r_{qi}\\left(i\\right)=r\\left[\\operatorname{mod}\\left(i,\\operatorname{length}\\left(r\\right)\\right)+1\\right]","labelSize":"medium"},{"type":"expression","id":"445","folderId":"21","color":"#2d70b3","latex":"I=4\\cdot\\frac{\\sum_{i=1}^{\\operatorname{length}\\left(r\\right)}\\left(d_{et}\\left(r\\left[i\\right],r_{qi}\\left(i\\right)\\right)\\cdot\\left(d_{ot2}\\left(r\\left[i\\right]\\right)+d_{ot}\\left(r\\left[i\\right],r_{qi}\\left(i\\right)\\right)+d_{ot2}\\left(r_{qi}\\left(i\\right)\\right)\\right)\\right)}{12\\sum_{i=1}^{\\operatorname{length}\\left(r\\right)}d_{et}\\left(r\\left[i\\right],r_{qi}\\left(i\\right)\\right)}","slider":{"hardMin":true,"min":"0"}},{"type":"text","id":"415","folderId":"21","text":"Position and velocity"},{"type":"expression","id":"2","folderId":"21","color":"#2d70b3","latex":"p=\\left(2.4105083648499925,-0.9004032953063599\\right)","labelSize":"medium"},{"type":"expression","id":"18","folderId":"21","color":"#388c46","latex":"p_{prev}=\\left(-2,1\\right)","hidden":true},{"type":"expression","id":"8","folderId":"21","color":"#388c46","latex":"v=\\left(-7.292125661304761,-0.5838536515896949\\right)","hidden":true},{"type":"expression","id":"373","folderId":"21","color":"#388c46","latex":"v_{prev}=\\left(-5,-1\\right)","hidden":true},{"type":"text","id":"419","folderId":"21","text":"Orientation and angular velocity"},{"type":"expression","id":"420","folderId":"21","color":"#2d70b3","latex":"\\alpha=52.4252288102661","labelSize":"medium"},{"type":"expression","id":"421","folderId":"21","color":"#c74440","latex":"\\alpha_{prev}=0.1"},{"type":"expression","id":"422","folderId":"21","color":"#2d70b3","latex":"\\omega=-12.773371006322058","labelSize":"medium"},{"type":"expression","id":"423","folderId":"21","color":"#388c46","latex":"\\omega_{prev}=0.5"},{"type":"text","id":"425","folderId":"21","text":"Absolute position of the vertices"},{"type":"expression","id":"503","folderId":"21","color":"#2d70b3","latex":"p_{rd}\\left(p_{0},\\alpha_{0},r_{0}\\right)=\\left(\\cos\\left(\\alpha_{0}\\right)r_{0}.x-\\sin\\left(\\alpha_{0}\\right)r_{0}.y,\\sin\\left(\\alpha_{0}\\right)r_{0}.x+\\cos\\left(\\alpha_{0}\\right)r_{0}.y\\right)"},{"type":"expression","id":"430","folderId":"21","color":"#388c46","latex":"p_{r}\\left(p_{0},\\alpha_{0},r_{0}\\right)=p_{0}+p_{rd}\\left(p_{0},\\alpha_{0},r_{0}\\right)"},{"type":"expression","id":"466","folderId":"21","color":"#388c46","latex":"v_{rd}\\left(p_{0},v_{0},\\alpha_{0},\\omega_{0},r_{0}\\right)=\\omega_{0}\\cdot r_{ot}\\left(p_{r}\\left(p_{0},\\alpha_{0},r_{0}\\right)-p_{0}\\right)"},{"type":"expression","id":"504","folderId":"21","color":"#388c46","latex":"v_{r}\\left(p_{0},v_{0},\\alpha_{0},\\omega_{0},r_{0}\\right)=v_{0}+v_{rd}\\left(p_{0},v_{0},\\alpha_{0},\\omega_{0},r_{0}\\right)"},{"type":"expression","id":"5","folderId":"21","color":"#000000","latex":"\\operatorname{polygon}\\left(p_{r}\\left(p,\\alpha,r\\right)\\right)","fill":false,"labelSize":"medium"},{"type":"expression","id":"1","folderId":"21","color":"#c74440","latex":"R_{eset}\\left(p_{0},v_{0},\\alpha_{0},\\omega_{0},h\\right)=p\\to p_{0}+v_{0}h+\\frac{1}{2}gh^{2},\\ p_{prev}\\to p_{0},\\ v\\to v_{0}+gh,\\ v_{prev}\\to v_{0},\\ \\alpha\\to\\alpha_{0}+\\omega_{0}h,\\alpha_{prev}\\to\\alpha_{0},\\omega\\to\\omega_{0},\\omega_{prev}\\to\\omega_{0}","labelSize":"medium"},{"type":"expression","id":"456","folderId":"21","color":"#c74440","latex":"p+\\sqrt{I}\\left(\\cos\\left(\\alpha\\right),\\sin\\left(\\alpha\\right)\\right)t","parametricDomain":{"min":"0","max":"1"},"domain":{"min":"0","max":"1"}},{"type":"expression","id":"457","folderId":"21","color":"#388c46","latex":"p+\\sqrt{I}\\left(-\\sin\\left(\\alpha\\right),\\cos\\left(\\alpha\\right)\\right)t","parametricDomain":{"min":"0","max":"1"},"domain":{"min":"0","max":"1"}},{"type":"text","id":"355","folderId":"21","text":"Energy, should stay the same for a \"good\" integrator"},{"type":"expression","id":"401","folderId":"21","color":"#000000","latex":"E_{grav}\\left(p_{0}\\right)=-d_{ot}\\left(p_{0}-\\left(0,-2\\right),g\\right)"},{"type":"expression","id":"426","folderId":"21","color":"#000000","latex":"E_{k}\\left(v_{0},\\omega_{0}\\right)=\\frac{1}{2}d_{ot2}\\left(v_{0}\\right)+\\frac{1}{2}I\\omega_{0}^{2}"},{"type":"expression","id":"384","folderId":"21","color":"#6042a6","latex":"E\\left(p_{0},v_{0},\\omega_{0}\\right)=E_{grav}\\left(p_{0}\\right)+E_{k}\\left(v_{0},\\omega_{0}\\right)"},{"type":"expression","id":"351","folderId":"21","color":"#6042a6","latex":"y=0.25\\sqrt{E\\left(p,v,\\omega\\right)}"},{"type":"text","id":"390","folderId":"21","text":"Previous positions"},{"type":"expression","id":"386","folderId":"21","color":"#fa7e19","latex":"P_{s}=\\left[\\left(-0.2045510215262203,0.13714274122208608\\right),\\left(-0.06826660858365652,-0.04984457791914792\\right),\\left(0.06801780435890725,-0.2613485220603819\\right),\\left(0.20430221730147102,-0.4973690912016159\\right),\\left(0.3405866302440348,-0.7579062853428499\\right),\\left(0.47687104318659856,-1.0429601044840837\\right),\\left(0.7061475055271128,-1.1665464498294513\\right),\\left(1.0735172571088865,-1.0608976949089362\\right),\\left(1.4408870086906602,-0.9797655649884209\\right),\\left(1.808256760272434,-0.9231500600679057\\right),\\left(2.1756265118542077,-0.8910511801473904\\right),\\left(2.5429962634359815,-0.8834689252268751\\right)\\right]","lines":true},{"type":"expression","id":"391","folderId":"21","color":"#000000","latex":"P_{ushP}\\left(\\right)=P_{s}\\to\\operatorname{join}\\left(P_{s},\\left[p\\right]\\right)\\left[\\max\\left(1,\\operatorname{length}\\left(P_{s}\\right)-10\\right)...\\operatorname{length}\\left(P_{s}\\right)+1\\right]"},{"type":"folder","id":"25","title":"Boundary","collapsed":true},{"type":"text","id":"27","folderId":"25","text":"SDF"},{"type":"expression","id":"6","folderId":"25","color":"#c74440","latex":"S\\left(x,y\\right)=\\max\\left(\\left|x\\right|-3,\\frac{y+0.1\\left|x\\right|}{\\sqrt{1.01}}-2,-y-2,\\frac{-2y-x}{\\sqrt{5}}-1,-\\max\\left(x+\\frac{1}{2},y\\right),0.1-\\sqrt{\\left(x-2\\right)^{2}+y^{2}}\\right)"},{"type":"expression","id":"7","folderId":"25","color":"#2d70b3","latex":"S\\left(x,y\\right)\\ge0"},{"type":"expression","id":"33","folderId":"25","color":"#2d70b3","latex":"C\\left(p_{0}\\right)=S\\left(p_{0}.x,p_{0}.y\\right)"},{"type":"text","id":"30","folderId":"25","text":"Normal"},{"type":"expression","id":"16","folderId":"25","color":"#c74440","latex":"N\\left(p_{0}\\right)=\\left(\\frac{S\\left(p_{0}.x+0.001,p_{0}.y\\right)-S\\left(p_{0}.x-0.001,p_{0}.y\\right)}{0.002},\\frac{S\\left(p_{0}.x,p_{0}.y+0.001\\right)-S\\left(p_{0}.x,p_{0}.y-0.001\\right)}{0.002}\\right)","labelSize":"medium"},{"type":"text","id":"32","folderId":"25","text":"Acceleration due to gravity"},{"type":"expression","id":"352","folderId":"25","color":"#6042a6","latex":"g=\\left(0,-9.80665\\right)","hidden":true,"dragMode":"NONE","slider":{"hardMin":true,"hardMax":true,"min":"9.79","max":"9.82"}},{"type":"text","id":"368","folderId":"25","text":"Net acceleration with penalty, for force-based updates"},{"type":"expression","id":"440","folderId":"25","color":"#388c46","latex":"F_{0}\\left(p_{0},\\alpha_{0}\\right)=-10000N\\left(p_{r}\\left(p_{0},\\alpha_{0},r\\right)\\right)\\max\\left(C\\left(p_{r}\\left(p_{0},\\alpha_{0},r\\right)\\right),0\\right)"},{"type":"expression","id":"12","folderId":"25","color":"#2d70b3","latex":"F\\left(p_{0},\\alpha_{0}\\right)=m_{eanPoints}\\left(F_{0}\\left(p_{0},\\alpha_{0}\\right)\\right)+g"},{"type":"expression","id":"438","folderId":"25","color":"#c74440","latex":"T\\left(p_{0},\\alpha_{0}\\right)=\\frac{1}{I}\\operatorname{mean}\\left(d_{et}\\left(p_{r}\\left(p_{0},\\alpha_{0},r\\right)-p_{0},F_{0}\\left(p_{0},\\alpha_{0}\\right)\\right)\\right)"},{"type":"folder","id":"342","title":"Force-based updates for reference","collapsed":true},{"type":"text","id":"348","folderId":"342","text":"Goes crazy"},{"type":"expression","id":"345","folderId":"342","color":"#6042a6","latex":"U_{pdateEuler}\\left(h\\right)=p\\to p+vh+\\frac{1}{2}F\\left(p,\\alpha\\right)h^{2},\\ v\\to v+F\\left(p,\\alpha\\right)h,\\ \\alpha\\to\\alpha+\\omega h+\\frac{1}{2}T\\left(p,\\alpha\\right)h^{2},\\ \\omega\\to\\omega+T\\left(p,\\alpha\\right)h"},{"type":"text","id":"366","folderId":"342","text":"Semi-implicit Euler"},{"type":"expression","id":"364","folderId":"342","color":"#2d70b3","latex":"U_{pdateEulerSI}\\left(h\\right)=p\\to p+\\left(v+F\\left(p,\\alpha\\right)h\\right)h,\\ v\\to v+F\\left(p,\\alpha\\right)h,\\ \\alpha\\to\\alpha+\\left(\\omega+T\\left(p,\\alpha\\right)h\\right)h,\\ \\omega\\to\\omega+T\\left(p,\\alpha\\right)h"},{"type":"text","id":"350","folderId":"342","text":"Doesn't \"blow off\" for a while with dt=0.01"},{"type":"expression","id":"19","folderId":"342","color":"#6042a6","latex":"U_{pdateVerlet}\\left(h\\right)=p\\to2p-p_{prev}+F\\left(p,\\alpha\\right)h^{2},\\ p_{prev}\\to p,\\ v\\to\\frac{p-p_{prev}}{h}+F\\left(p,\\alpha\\right)h,\\ \\alpha\\to2\\alpha-\\alpha_{prev}+T\\left(p,\\alpha\\right)h^{2},\\ \\alpha_{prev}\\to\\alpha,\\ \\omega\\to\\frac{\\alpha-\\alpha_{prev}}{h}+T\\left(p,\\alpha\\right)h"},{"type":"folder","id":"357","title":"An attempt for non-penetrating collision response","collapsed":true},{"type":"text","id":"403","folderId":"357","text":"Forward Euler"},{"type":"expression","id":"381","folderId":"357","color":"#c74440","latex":"p_{Euler}\\left(p_{0},v_{0},h\\right)=p_{0}+v_{0}h+\\frac{1}{2}gh^{2}"},{"type":"expression","id":"451","folderId":"357","color":"#388c46","latex":"\\alpha_{Euler}\\left(\\alpha_{0},\\omega_{0},h\\right)=\\alpha_{0}+\\omega_{0}h"},{"type":"expression","id":"454","folderId":"357","color":"#c74440","latex":"p_{rEuler}\\left(p_{0},v_{0},\\alpha_{0},\\omega_{0},r_{0},h\\right)=p_{r}\\left(p_{Euler}\\left(p_{0},v_{0},h\\right),\\alpha_{Euler}\\left(\\alpha_{0},\\omega_{0},h\\right),r_{0}\\right)","labelSize":"medium"},{"type":"expression","id":"385","folderId":"357","color":"#c74440","latex":"U_{pdateCdEuler}\\left(h\\right)=p\\to p_{Euler}\\left(p,v,h\\right),\\ v\\to v+gh,\\ \\alpha\\to\\alpha+\\omega h"},{"type":"text","id":"405","folderId":"357","text":"Linear interpolate collision time"},{"type":"expression","id":"358","folderId":"357","color":"#388c46","latex":"t_{cd}\\left(r_{0},h\\right)=-\\frac{C\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)}{C\\left(p_{rEuler}\\left(p,v,\\alpha,\\omega,r_{0},h\\right)\\right)-C\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)}","labelSize":"medium"},{"type":"text","id":"407","folderId":"357","text":"Collision response\nd_pCd1 is the change of momentum along the normal, derived from the conservation of energy."},{"type":"expression","id":"458","folderId":"357","color":"#000000","latex":"d_{pCd}\\left(r_{0},n\\right)=-\\frac{2\\left(d_{ot}\\left(v,n\\right)+\\omega d_{et}\\left(p_{rd}\\left(p,\\alpha,r_{0}\\right),n\\right)\\right)}{d_{ot2}\\left(n\\right)+\\frac{1}{I}d_{et}\\left(p_{rd}\\left(p,\\alpha,r_{0}\\right),n\\right)^{2}}"},{"type":"expression","id":"374","folderId":"357","color":"#6042a6","latex":"p_{cdr}\\left(r_{0},n,t,h\\right)=p+vht+\\left(v+d_{pCd}\\left(r_{0},n\\right)n\\right)h\\left(1-t\\right)+\\frac{1}{2}gh^{2}","labelSize":"medium"},{"type":"expression","id":"383","folderId":"357","color":"#388c46","latex":"p_{cd}\\left(r_{0},h\\right)=p_{cdr}\\left(r_{0},N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right),t_{cd}\\left(r_{0},h\\right),h\\right)"},{"type":"expression","id":"376","folderId":"357","color":"#c74440","latex":"v_{cd}\\left(r_{0},h\\right)=v+d_{pCd}\\left(r_{0},N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)\\right)N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)+gh"},{"type":"expression","id":"462","folderId":"357","color":"#6042a6","latex":"\\alpha_{cdr}\\left(r_{0},n,t,h\\right)=\\alpha+\\omega ht+\\left(\\omega+\\frac{1}{I}d_{pCd}\\left(r_{0},n\\right)d_{et}\\left(p_{rd}\\left(p,\\alpha,r_{0}\\right),n\\right)\\right)h\\left(1-t\\right)"},{"type":"expression","id":"463","folderId":"357","color":"#000000","latex":"\\alpha_{cd}\\left(r_{0},h\\right)=\\alpha_{cdr}\\left(r_{0},N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right),t_{cd}\\left(r_{0},h\\right),h\\right)"},{"type":"expression","id":"465","folderId":"357","color":"#2d70b3","latex":"\\omega_{cd}\\left(r_{0},h\\right)=\\omega+\\frac{1}{I}d_{pCd}\\left(r_{0},N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)\\right)d_{et}\\left(p_{rd}\\left(p,\\alpha,r_{0}\\right),N\\left(p_{r}\\left(p,\\alpha,r_{0}\\right)\\right)\\right)"},{"type":"text","id":"511","folderId":"357","text":"Total collision response (average all collisions? bad.)"},{"type":"expression","id":"486","folderId":"357","color":"#000000","latex":"C_{dCd}\\left(r_{0},h\\right)=0.5+0.5\\operatorname{sign}\\left(C\\left(p_{rEuler}\\left(p,v,\\alpha,\\omega,r_{0},h\\right)\\right)\\right)","labelSize":"medium"},{"type":"expression","id":"506","folderId":"357","color":"#000000","latex":"p_{totCd1}\\left(h\\right)=p+\\frac{t_{otalPoints}\\left(C_{dCd}\\left(r,h\\right)\\left(p_{cd}\\left(r,h\\right)-p\\right)\\right)}{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\right)}"},{"type":"expression","id":"507","folderId":"357","color":"#c74440","latex":"v_{totCd1}\\left(h\\right)=v+\\frac{t_{otalPoints}\\left(C_{dCd}\\left(r,h\\right)\\left(v_{cd}\\left(r,h\\right)-v\\right)\\right)}{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\right)}"},{"type":"expression","id":"508","folderId":"357","color":"#2d70b3","latex":"\\alpha_{totCd1}\\left(h\\right)=\\alpha+\\frac{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\left(\\alpha_{cd}\\left(r,h\\right)-\\alpha\\right)\\right)}{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\right)}","hidden":true},{"type":"expression","id":"509","folderId":"357","color":"#388c46","latex":"\\omega_{totCd1}\\left(h\\right)=\\omega+\\frac{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\left(\\omega_{cd}\\left(r,h\\right)-\\omega\\right)\\right)}{\\operatorname{total}\\left(C_{dCd}\\left(r,h\\right)\\right)}","hidden":true},{"type":"expression","id":"515","folderId":"357","color":"#c74440","latex":"c_{vertices}=\\operatorname{rgb}\\left(255C_{dCd}\\left(r,d_{t}\\right),0,128\\right)"},{"type":"expression","id":"516","folderId":"357","color":"#2d70b3","latex":"p_{r}\\left(p,\\alpha,r\\right)","colorLatex":"c_{vertices}"},{"type":"text","id":"518","folderId":"357","text":"Collision detection using the weighted average of all r"},{"type":"expression","id":"529","folderId":"357","color":"#6042a6","latex":"C_{dCd0}\\left(r_{0},h\\right)=\\max\\left(C\\left(p_{rEuler}\\left(p,v,\\alpha,\\omega,r_{0},h\\right)\\right),0\\right)"},{"type":"expression","id":"519","folderId":"357","color":"#6042a6","latex":"r_{colCd2r}\\left(h\\right)=\\frac{t_{otalPoints}\\left(C_{dCd0}\\left(r,h\\right)r\\right)}{\\operatorname{total}\\left(C_{dCd0}\\left(r,h\\right)\\right)}"},{"type":"expression","id":"527","folderId":"357","color":"#2d70b3","latex":"r_{colCd2}\\left(h\\right)=n_{ormalize}\\left(r_{colCd2r}\\left(h\\right)\\right)\\cdot\\frac{\\operatorname{total}\\left(C_{dCd0}\\left(r,h\\right)\\sqrt{d_{ot2}\\left(r\\right)}\\right)}{\\operatorname{total}\\left(C_{dCd0}\\left(r,h\\right)\\right)}"},{"type":"expression","id":"526","folderId":"357","color":"#c74440","latex":"p_{r}\\left(p,\\alpha,r_{colCd2}\\left(d_{t}\\right)\\right)"},{"type":"expression","id":"520","folderId":"357","color":"#000000","latex":"p_{totCd2}\\left(h\\right)=p_{cd}\\left(r_{colCd2}\\left(h\\right),h\\right)"},{"type":"expression","id":"521","folderId":"357","color":"#c74440","latex":"v_{totCd2}\\left(h\\right)=v_{cd}\\left(r_{colCd2}\\left(h\\right),h\\right)"},{"type":"expression","id":"522","folderId":"357","color":"#2d70b3","latex":"\\alpha_{totCd2}\\left(h\\right)=\\alpha_{cd}\\left(r_{colCd2}\\left(h\\right),h\\right)","hidden":true},{"type":"expression","id":"523","folderId":"357","color":"#388c46","latex":"\\omega_{totCd2}\\left(h\\right)=\\omega_{cd}\\left(r_{colCd2}\\left(h\\right),h\\right)","hidden":true},{"type":"text","id":"409","folderId":"357","text":"Update, enforce energy conservation"},{"type":"expression","id":"388","folderId":"357","color":"#388c46","latex":"E_{mCd1}\\left(h\\right)=\\sqrt{\\frac{E_{k}\\left(v,\\omega\\right)+E_{grav}\\left(p\\right)-E_{grav}\\left(p_{totCd1}\\left(h\\right)\\right)}{E_{k}\\left(v_{totCd1}\\left(h\\right),\\omega_{totCd1}\\left(h\\right)\\right)}}","hidden":true},{"type":"expression","id":"525","folderId":"357","color":"#000000","latex":"E_{mCd2}\\left(h\\right)=\\sqrt{\\frac{E_{k}\\left(v,\\omega\\right)+E_{grav}\\left(p\\right)-E_{grav}\\left(p_{totCd2}\\left(h\\right)\\right)}{E_{k}\\left(v_{totCd2}\\left(h\\right),\\omega_{totCd2}\\left(h\\right)\\right)}}","hidden":true},{"type":"expression","id":"377","folderId":"357","color":"#2d70b3","latex":"U_{pdateCd1r}\\left(r_{0},h\\right)=p\\to p_{totCd1}\\left(h\\right),\\ v\\to v_{totCd1}\\left(h\\right)E_{mCd1}\\left(h\\right),\\ \\alpha\\to\\alpha_{totCd1}\\left(h\\right),\\ \\omega\\to\\omega_{totCd1}\\left(h\\right)E_{mCd1}\\left(h\\right)"},{"type":"expression","id":"524","folderId":"357","color":"#6042a6","latex":"U_{pdateCd2r}\\left(r_{0},h\\right)=p\\to p_{totCd2}\\left(h\\right),\\ v\\to v_{totCd2}\\left(h\\right)E_{mCd2}\\left(h\\right),\\ \\alpha\\to\\alpha_{totCd2}\\left(h\\right),\\ \\omega\\to\\omega_{totCd2}\\left(h\\right)E_{mCd2}\\left(h\\right)"},{"type":"expression","id":"379","folderId":"357","color":"#6042a6","latex":"U_{pdateCd}\\left(r_{0},h\\right)=\\left\\{\\operatorname{total}\\left(C_{dCd}\\left(r_{0},h\\right)\\right)>0:U_{pdateCd2r}\\left(r_{0},h\\right),U_{pdateCdEuler}\\left(h\\right)\\right\\}"},{"type":"expression","id":"378","color":"#388c46","latex":"U_{pdate}\\left(h\\right)=U_{pdateCd}\\left(r,h\\right),\\ P_{ushP}\\left(\\right)"},{"type":"expression","id":"470","color":"#2d70b3","latex":"R_{eset}\\left(\\left(-2,1\\right),\\left(-5,-1\\right),0.1,0.5,d_{t}\\right),\\ P_{s}\\to\\left[\\right]"},{"type":"expression","id":"392","color":"#c74440","latex":"U_{pdate}\\left(d_{t}\\right)"},{"type":"folder","id":"dsm-metadata-folder","title":"DesModder Metadata","secret":true},{"type":"text","id":"dsm-metadata","folderId":"dsm-metadata-folder","text":"{\"version\":2,\"expressions\":{\"448\":{\"errorHidden\":true}}}"},{"type":"text","id":"450","text":"- Harry Chen (harry7557558)"}],"ticker":{"handlerLatex":"U_{pdate}\\left(d_{t}\\right)","minStepLatex":"50","playing":true,"open":true}}}}